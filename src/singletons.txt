./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:31:        services.TryAddSingleton<IAntiforgery, DefaultAntiforgery>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:32:        services.TryAddSingleton<IAntiforgeryTokenGenerator, DefaultAntiforgeryTokenGenerator>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:33:        services.TryAddSingleton<IAntiforgeryTokenSerializer, DefaultAntiforgeryTokenSerializer>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:34:        services.TryAddSingleton<IAntiforgeryTokenStore, DefaultAntiforgeryTokenStore>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:35:        services.TryAddSingleton<IClaimUidExtractor, DefaultClaimUidExtractor>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:36:        services.TryAddSingleton<IAntiforgeryAdditionalDataProvider, DefaultAntiforgeryAdditionalDataProvider>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:37:        services.TryAddSingleton<ObjectPoolProvider, DefaultObjectPoolProvider>();
./Antiforgery/src/AntiforgeryServiceCollectionExtensions.cs:39:        services.TryAddSingleton<ObjectPool<AntiforgerySerializationContext>>(serviceProvider =>
./Antiforgery/test/DefaultAntiforgeryTest.cs:354:        services.AddSingleton(loggerFactory.Object);
./Antiforgery/test/DefaultAntiforgeryTest.cs:1285:        services.AddSingleton(loggerFactory.Object);
./Antiforgery/test/DefaultAntiforgeryTest.cs:1323:        services.AddSingleton(loggerFactory.Object);
./Antiforgery/test/DefaultAntiforgeryTest.cs:1357:        services.AddSingleton(loggerFactory.Object);
./Antiforgery/test/DefaultAntiforgeryTest.cs:1404:        builder.AddSingleton<ILoggerFactory>(new LoggerFactory());
./Components/Authorization/test/AuthorizeRouteViewTest.cs:31:        serviceCollection.AddSingleton<AuthenticationStateProvider>(_authenticationStateProvider);
./Components/Authorization/test/AuthorizeRouteViewTest.cs:32:        serviceCollection.AddSingleton<IAuthorizationPolicyProvider, TestAuthorizationPolicyProvider>();
./Components/Authorization/test/AuthorizeRouteViewTest.cs:33:        serviceCollection.AddSingleton<IAuthorizationService>(_testAuthorizationService);
./Components/Authorization/test/AuthorizeRouteViewTest.cs:34:        serviceCollection.AddSingleton<NavigationManager, TestNavigationManager>();
./Components/Authorization/test/AuthorizeViewTest.cs:567:        serviceCollection.AddSingleton(authorizationService);
./Components/Authorization/test/AuthorizeViewTest.cs:568:        serviceCollection.AddSingleton<IAuthorizationPolicyProvider>(new TestAuthorizationPolicyProvider());
./Components/Authorization/test/CascadingAuthenticationStateTest.cs:41:        services.AddSingleton<AuthenticationStateProvider>(authStateProvider);
./Components/Authorization/test/CascadingAuthenticationStateTest.cs:74:        services.AddSingleton<AuthenticationStateProvider>(authStateProvider);
./Components/Authorization/test/CascadingAuthenticationStateTest.cs:126:        services.AddSingleton<AuthenticationStateProvider>(authStateProvider);
./Components/Components/test/OwningComponentBaseTest.cs:15:        services.AddSingleton<Counter>();
./Components/Components/test/Routing/RouterTest.cs:23:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Components/Components/test/Routing/RouterTest.cs:24:        services.AddSingleton<NavigationManager>(_navigationManager);
./Components/Components/test/Routing/RouterTest.cs:25:        services.AddSingleton<INavigationInterception, TestNavigationInterception>();
./Components/Samples/BlazorServerApp/Startup.cs:23:        services.AddSingleton<WeatherForecastService>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:60:        services.TryAddSingleton<ICircuitFactory, CircuitFactory>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:61:        services.TryAddSingleton<IServerComponentDeserializer, ServerComponentDeserializer>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:62:        services.TryAddSingleton<ICircuitHandleRegistry, CircuitHandleRegistry>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:63:        services.TryAddSingleton<RootComponentTypeCache>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:64:        services.TryAddSingleton<ComponentParameterDeserializer>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:65:        services.TryAddSingleton<ComponentParametersTypeCache>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:66:        services.TryAddSingleton<CircuitIdFactory>();
./Components/Server/src/DependencyInjection/ComponentServiceCollectionExtensions.cs:72:        services.TryAddSingleton<CircuitRegistry>();
./Components/Server/test/Circuits/CircuitHostTest.cs:324:        serviceCollection.AddSingleton(new Mock<IJSRuntime>().Object);
./Components/Server/test/Circuits/RemoteRendererTest.cs:425:        serviceCollection.AddSingleton(new Mock<IJSRuntime>().Object);
./Components/Server/test/ComponentEndpointRouteBuilderExtensionsTest.cs:132:        services.AddSingleton(Mock.Of<IHostApplicationLifetime>());
./Components/Server/test/ComponentEndpointRouteBuilderExtensionsTest.cs:136:        services.AddSingleton(listener);
./Components/Server/test/ComponentEndpointRouteBuilderExtensionsTest.cs:137:        services.AddSingleton<DiagnosticSource>(listener);
./Components/Server/test/ComponentEndpointRouteBuilderExtensionsTest.cs:141:        services.AddSingleton(environment.Object);
./Components/Server/test/ComponentEndpointRouteBuilderExtensionsTest.cs:142:        services.AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Components/test/testassets/BasicTestApp/Program.cs:33:        builder.Services.AddSingleton(new HttpClient { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });
./Components/test/testassets/BasicTestApp/Program.cs:34:        builder.Services.AddSingleton<AuthenticationStateProvider, ServerAuthenticationStateProvider>();
./Components/test/testassets/BasicTestApp/Program.cs:46:        builder.Logging.Services.AddSingleton<ILoggerProvider, PrependMessageLoggerProvider>(s =>
./Components/test/testassets/ComponentsApp.Server/Startup.cs:13:        services.AddSingleton<CircuitHandler, LoggingCircuitHandler>();
./Components/test/testassets/ComponentsApp.Server/Startup.cs:19:        services.AddSingleton<WeatherForecastService, DefaultWeatherForecastService>();
./Components/test/testassets/TestServer/ServerStartup.cs:31:        services.AddSingleton<ResourceRequestLog>();
./Components/test/testassets/TestServer/ServerStartup.cs:36:        services.AddSingleton<IDataProtectionProvider, EphemeralDataProtectionProvider>();
./Components/test/testassets/TestServer/Startup.cs:20:        services.AddSingleton<TestAppInfo>();
./Components/WebAssembly/Samples/HostedBlazorWebassemblyApp/Server/Startup.cs:32:        services.AddSingleton<IWeatherForecastService, WeatherForecastService>();
./Components/WebAssembly/testassets/HostedInAspNet.Server/Startup.cs:19:        services.AddSingleton<BootResourceRequestLog>();
./Components/WebAssembly/testassets/StandaloneApp/Program.cs:15:        builder.Services.AddSingleton(new HttpClient { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });
./Components/WebAssembly/testassets/Wasm.Authentication.Client/Program.cs:23:        builder.Services.AddSingleton<StateService>();
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:157:        Services.AddSingleton<IWebAssemblyHostEnvironment>(hostEnvironment);
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:247:        Services.AddSingleton<IConfiguration>(Configuration);
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:260:        Services.AddSingleton<IJSRuntime>(DefaultWebAssemblyJSRuntime.Instance);
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:261:        Services.AddSingleton<NavigationManager>(WebAssemblyNavigationManager.Instance);
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:262:        Services.AddSingleton<INavigationInterception>(WebAssemblyNavigationInterception.Instance);
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:263:        Services.AddSingleton(new LazyAssemblyLoader(DefaultWebAssemblyJSRuntime.Instance));
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:264:        Services.AddSingleton<ComponentStatePersistenceManager>();
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:265:        Services.AddSingleton<PersistentComponentState>(sp => sp.GetRequiredService<ComponentStatePersistenceManager>().State);
./Components/WebAssembly/WebAssembly/src/Hosting/WebAssemblyHostBuilder.cs:266:        Services.AddSingleton<IErrorBoundaryLogger, WebAssemblyErrorBoundaryLogger>();
./Components/WebAssembly/WebAssembly/test/Hosting/WebAssemblyHostBuilderTest.cs:101:        builder.Services.AddSingleton<TestServiceThatTakesStringBuilder>();
./Components/WebAssembly/WebAssembly/test/Hosting/WebAssemblyHostBuilderTest.cs:118:        builder.Services.AddSingleton<TestServiceThatTakesStringBuilder>();
./Components/WebAssembly/WebAssembly/test/Hosting/WebAssemblyHostTest.cs:63:        builder.Services.AddSingleton<DisposableService>();
./Components/WebView/Samples/PhotinoPlatform/testassets/PhotinoTestApp/Program.cs:18:        serviceCollection.AddSingleton<HttpClient>();
./Components/WebView/WebView/test/WebViewManagerTests.cs:115:        return new ServiceCollection().AddSingleton<SingletonService>().AddScoped<ScopedService>();
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:88:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:114:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:173:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:197:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:220:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:253:        builder.Services.TryAddSingleton<ICertificateResolver, CertificateResolver>();
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:255:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:326:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionBuilderExtensions.cs:380:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:36:        services.TryAddSingleton<IActivator, TypeForwardingActivator>();
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:65:            services.TryAddSingleton<IRegistryPolicyResolver, RegistryPolicyResolver>();
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:73:        services.TryAddSingleton<IKeyManager, XmlKeyManager>();
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:74:        services.TryAddSingleton<IApplicationDiscriminator, HostingApplicationDiscriminator>();
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:78:        services.TryAddSingleton<IDefaultKeyResolver, DefaultKeyResolver>();
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:79:        services.TryAddSingleton<IKeyRingProvider, KeyRingProvider>();
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:81:        services.TryAddSingleton<IDataProtectionProvider>(s =>
./DataProtection/DataProtection/src/DataProtectionServiceCollectionExtensions.cs:98:        services.TryAddSingleton<ICertificateResolver, CertificateResolver>();
./DataProtection/DataProtection/test/ActivatorTests.cs:73:        serviceCollection.AddSingleton<IActivator>(expectedActivator);
./DataProtection/DataProtection/test/DataProtectionUtilityExtensionsTests.cs:34:            .AddSingleton(mockEnvironment.Object)
./DataProtection/DataProtection/test/DataProtectionUtilityExtensionsTests.cs:65:            .AddSingleton(mockEnvironment.Object)
./DataProtection/DataProtection/test/DataProtectionUtilityExtensionsTests.cs:92:            .AddSingleton(mockEnvironment.Object)
./DataProtection/DataProtection/test/DataProtectionUtilityExtensionsTests.cs:93:            .AddSingleton(mockAppDiscriminator.Object)
./DataProtection/DataProtection/test/HostingTests.cs:34:                .AddSingleton<IServer>(
./DataProtection/DataProtection/test/HostingTests.cs:60:                .AddSingleton<IServer>(
./DataProtection/DataProtection/test/HostingTests.cs:89:                .AddSingleton(mockServer.Object))
./DataProtection/DataProtection/test/KeyManagement/KeyEscrowServiceProviderExtensionsTests.cs:43:        serviceCollection.AddSingleton<IKeyEscrowSink>(mockKeyEscrowSink.Object);
./DataProtection/DataProtection/test/KeyManagement/KeyEscrowServiceProviderExtensionsTests.cs:75:        serviceCollection.AddSingleton<IKeyEscrowSink>(mockKeyEscrowSink1.Object);
./DataProtection/DataProtection/test/KeyManagement/KeyEscrowServiceProviderExtensionsTests.cs:76:        serviceCollection.AddSingleton<IKeyEscrowSink>(mockKeyEscrowSink2.Object);
./DataProtection/DataProtection/test/XmlEncryption/CertificateXmlEncryptionTests.cs:39:        serviceCollection.AddSingleton<IInternalEncryptedXmlDecryptor>(mockInternalDecryptor.Object);
./DataProtection/DataProtection/test/XmlEncryption/XmlEncryptionExtensionsTests.cs:41:        serviceCollection.AddSingleton<IActivator>(mockActivator.Object);
./DataProtection/DataProtection/test/XmlEncryption/XmlEncryptionExtensionsTests.cs:91:        serviceCollection.AddSingleton<IActivator>(mockActivator.Object);
./DataProtection/EntityFrameworkCore/src/EntityFrameworkCoreDataProtectionExtensions.cs:27:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(services =>
./DataProtection/Extensions/test/DataProtectionProviderTests.cs:61:            builder.Services.AddSingleton<IKeyManager>(s =>
./DataProtection/samples/CustomEncryptorSample/CustomBuilderExtensions.cs:18:        builder.Services.AddSingleton<IConfigureOptions<KeyManagementOptions>>(serviceProvider =>
./DefaultBuilder/src/WebHost.cs:256:            services.AddSingleton<IOptionsChangeTokenSource<HostFilteringOptions>>(
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:114:        builder.Services.AddSingleton<IServer>(server);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:135:        builder.Services.AddSingleton<IServer>(server);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:154:        builder.Services.AddSingleton<IServer>(server);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:173:        builder.Services.AddSingleton<IServer>(server);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:193:        builder.Services.AddSingleton<IServer>(server);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:213:        builder.Services.AddSingleton<IServer>(new MockAddressesServer());
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:227:        builder.Services.AddSingleton<IHostedService>(hostedService);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:228:        builder.Services.AddSingleton<IServer>(server);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:286:        builder.Services.AddSingleton<IServer>(new MockAddressesServer());
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:297:        builder.Services.AddSingleton<IServer>(new MockAddressesServer(new List<string>().AsReadOnly()));
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1248:        builder.Services.AddSingleton<IConfiguration>(builder.Configuration);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1320:        builder.Services.AddSingleton(builder.Services);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1343:                services.AddSingleton<IService, Service>();
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1350:        builder.Services.AddSingleton(builder.Services);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1396:        builder.Services.AddSingleton(builder.Services);
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1400:        builder.Services.AddSingleton<IHostLifetime, CustomHostLifetime>();
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1512:        builder.Services.AddSingleton<IStartupFilter, TerminalMiddlewareStartupFilter>();
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1534:        builder.Services.AddSingleton<IStartupFilter, UseRoutingStartupFilter>();
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1650:        builder.Services.AddSingleton<Service2>();
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1664:        Assert.Throws<InvalidOperationException>(() => builder.Services.AddSingleton<IService>(new Service()));
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1665:        Assert.Throws<InvalidOperationException>(() => builder.Services.TryAddSingleton(new Service()));
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1860:        builder.Services.AddSingleton<IStartupFilter, PropertyFilter>();
./DefaultBuilder/test/Microsoft.AspNetCore.Tests/WebApplicationTests.cs:1896:        builder.Services.AddSingleton<IStartupFilter, ThrowingStartupFilter>();
./DefaultBuilder/testassets/DependencyInjectionApp/Program.cs:21:                services.AddSingleton(typeof(IService<>), typeof(Service<>));
./Grpc/JsonTranscoding/src/Microsoft.AspNetCore.Grpc.JsonTranscoding/GrpcJsonTranscodingServiceExtensions.cs:30:        builder.Services.TryAddSingleton<DescriptorRegistry>();
./Grpc/JsonTranscoding/src/Microsoft.AspNetCore.Grpc.Swagger/GrpcSwaggerServiceExtensions.cs:35:        services.TryAddSingleton<IApiDescriptionGroupCollectionProvider>(serviceProvider =>
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.JsonTranscoding.IntegrationTests/Infrastructure/GrpcTestFixture.cs:53:                    services.AddSingleton<ILoggerFactory>(LoggerFactory);
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.JsonTranscoding.IntegrationTests/Infrastructure/GrpcTestFixture.cs:55:                    services.AddSingleton<DynamicGrpcServiceRegistry>();
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.JsonTranscoding.IntegrationTests/Infrastructure/TestHelpers.cs:22:        serviceCollection.AddSingleton(typeof(IGrpcInterceptorActivator<>), typeof(TestInterceptorActivator<>));
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.JsonTranscoding.Tests/Infrastructure/TestHelpers.cs:23:        serviceCollection.AddSingleton<JsonTranscodingGreeterService>();
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.JsonTranscoding.Tests/Infrastructure/TestHelpers.cs:24:        serviceCollection.AddSingleton(typeof(IGrpcInterceptorActivator<>), typeof(TestInterceptorActivator<>));
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.Swagger.Tests/GrpcSwaggerServiceExtensionsTests.cs:30:        services.AddSingleton<IWebHostEnvironment, TestWebHostEnvironment>();
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.Swagger.Tests/GrpcSwaggerServiceExtensionsTests.cs:66:        services.AddSingleton<IWebHostEnvironment, TestWebHostEnvironment>();
./Grpc/JsonTranscoding/test/Microsoft.AspNetCore.Grpc.Swagger.Tests/Infrastructure/OpenApiTestHelpers.cs:30:        services.AddSingleton<IWebHostEnvironment, TestWebHostEnvironment>();
./Grpc/JsonTranscoding/test/testassets/IntegrationTestsWebsite/Startup.cs:24:        services.TryAddSingleton<DynamicEndpointDataSource>();
./HealthChecks/HealthChecks/src/DependencyInjection/HealthCheckServiceCollectionExtensions.cs:28:        services.TryAddSingleton<HealthCheckService, DefaultHealthCheckService>();
./HealthChecks/HealthChecks/test/DefaultHealthCheckServiceTest.cs:341:            b.Services.AddSingleton<ILoggerFactory>(loggerFactory);
./HealthChecks/HealthChecks/test/DefaultHealthCheckServiceTest.cs:467:            b.Services.AddSingleton<AnotherService>();
./HealthChecks/HealthChecks/test/DependencyInjection/HealthChecksBuilderTest.cs:69:        services.AddSingleton(instance);
./HealthChecks/HealthChecks/test/DependencyInjection/ServiceCollectionExtensionsTest.cs:52:        services.AddSingleton<IHostedService, DummyHostedService>();
./HealthChecks/HealthChecks/test/HealthCheckPublisherHostedServiceTest.cs:485:                serviceCollection.AddSingleton<IHealthCheckPublisher>(publishers[i]);
./HealthChecks/HealthChecks/test/HealthCheckPublisherHostedServiceTest.cs:496:            serviceCollection.AddSingleton<ILoggerFactory>(new TestLoggerFactory(sink, enabled: true));
./Hosting/Abstractions/src/HostingAbstractionsWebHostBuilderExtensions.cs:76:            services.AddSingleton(server);
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:58:            services.AddSingleton(webhostContext.HostingEnvironment);
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:60:            services.AddSingleton((AspNetCore.Hosting.IHostingEnvironment)webhostContext.HostingEnvironment);
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:61:            services.AddSingleton<IApplicationLifetime, GenericWebHostApplicationLifetime>();
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:74:            services.TryAddSingleton(sp => new DiagnosticListener("Microsoft.AspNetCore"));
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:75:            services.TryAddSingleton<DiagnosticSource>(sp => sp.GetRequiredService<DiagnosticListener>());
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:76:            services.TryAddSingleton(sp => new ActivitySource("Microsoft.AspNetCore"));
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:77:            services.TryAddSingleton(DistributedContextPropagator.Current);
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:79:            services.TryAddSingleton<IHttpContextFactory, DefaultHttpContextFactory>();
./Hosting/Hosting/src/GenericHost/GenericWebHostBuilder.cs:81:            services.TryAddSingleton<IApplicationBuilderFactory, ApplicationBuilderFactory>();
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:34:            services.AddSingleton(webhostContext.HostingEnvironment);
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:36:            services.AddSingleton((AspNetCore.Hosting.IHostingEnvironment)webhostContext.HostingEnvironment);
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:37:            services.AddSingleton<IApplicationLifetime, GenericWebHostApplicationLifetime>();
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:48:            services.TryAddSingleton(sp => new DiagnosticListener("Microsoft.AspNetCore"));
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:49:            services.TryAddSingleton<DiagnosticSource>(sp => sp.GetRequiredService<DiagnosticListener>());
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:50:            services.TryAddSingleton(sp => new ActivitySource("Microsoft.AspNetCore"));
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:51:            services.TryAddSingleton(DistributedContextPropagator.Current);
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:53:            services.TryAddSingleton<IHttpContextFactory, DefaultHttpContextFactory>();
./Hosting/Hosting/src/GenericHost/SlimWebHostBuilder.cs:55:            services.TryAddSingleton<IApplicationBuilderFactory, ApplicationBuilderFactory>();
./Hosting/Hosting/src/Internal/WebHost.cs:64:        _applicationServiceCollection.AddSingleton<ApplicationLifetime>();
./Hosting/Hosting/src/Internal/WebHost.cs:66:        _applicationServiceCollection.AddSingleton<IHostApplicationLifetime>(services
./Hosting/Hosting/src/Internal/WebHost.cs:69:        _applicationServiceCollection.AddSingleton<AspNetCore.Hosting.IApplicationLifetime>(services
./Hosting/Hosting/src/Internal/WebHost.cs:71:        _applicationServiceCollection.AddSingleton<Extensions.Hosting.IApplicationLifetime>(services
./Hosting/Hosting/src/Internal/WebHost.cs:74:        _applicationServiceCollection.AddSingleton<HostedServiceExecutor>();
./Hosting/Hosting/src/WebHostBuilder.cs:266:        services.AddSingleton(_options);
./Hosting/Hosting/src/WebHostBuilder.cs:267:        services.AddSingleton<IWebHostEnvironment>(_hostingEnvironment);
./Hosting/Hosting/src/WebHostBuilder.cs:268:        services.AddSingleton<IHostEnvironment>(_hostingEnvironment);
./Hosting/Hosting/src/WebHostBuilder.cs:270:        services.AddSingleton<AspNetCore.Hosting.IHostingEnvironment>(_hostingEnvironment);
./Hosting/Hosting/src/WebHostBuilder.cs:271:        services.AddSingleton<Extensions.Hosting.IHostingEnvironment>(_hostingEnvironment);
./Hosting/Hosting/src/WebHostBuilder.cs:273:        services.AddSingleton(_context);
./Hosting/Hosting/src/WebHostBuilder.cs:283:        services.AddSingleton<IConfiguration>(_ => configuration);
./Hosting/Hosting/src/WebHostBuilder.cs:286:        services.TryAddSingleton(sp => new DiagnosticListener("Microsoft.AspNetCore"));
./Hosting/Hosting/src/WebHostBuilder.cs:287:        services.TryAddSingleton<DiagnosticSource>(sp => sp.GetRequiredService<DiagnosticListener>());
./Hosting/Hosting/src/WebHostBuilder.cs:288:        services.TryAddSingleton(sp => new ActivitySource("Microsoft.AspNetCore"));
./Hosting/Hosting/src/WebHostBuilder.cs:289:        services.TryAddSingleton(DistributedContextPropagator.Current);
./Hosting/Hosting/src/WebHostBuilder.cs:319:                services.AddSingleton(typeof(IStartup), startupType);
./Hosting/Hosting/src/WebHostBuilder.cs:323:                services.AddSingleton(typeof(IStartup), RegisterStartup);
./Hosting/Hosting/src/WebHostBuilder.cs:337:            services.AddSingleton<IStartup>(_ =>
./Hosting/Hosting/src/WebHostBuilderExtensions.cs:47:            services.AddSingleton<IStartup>(sp =>
./Hosting/Hosting/src/WebHostBuilderExtensions.cs:76:            services.AddSingleton<IStartup>(sp =>
./Hosting/Hosting/src/WebHostBuilderExtensions.cs:107:                services.AddSingleton(typeof(IStartup), GetStartupInstance);
./Hosting/Hosting/src/WebHostBuilderExtensions.cs:154:                    services.AddSingleton(typeof(IStartup), state.StartupType);
./Hosting/Hosting/src/WebHostBuilderExtensions.cs:158:                    services.AddSingleton(typeof(IStartup), sp =>
./Hosting/Hosting/test/ConfigureBuilderTests.cs:19:            .AddSingleton<CrasherService>()
./Hosting/Hosting/test/Fakes/StartupWithConfigureServices.cs:13:        services.AddSingleton<IFoo, Foo>();
./Hosting/Hosting/test/Fakes/StartupWithILoggerFactory.cs:23:        collection.AddSingleton(this);
./Hosting/Hosting/test/StartupManagerTests.cs:20:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:22:        serviceCollection.AddSingleton<IStartupConfigureServicesFilter>(new TestStartupServicesFilter(1, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:23:        serviceCollection.AddSingleton<IStartupConfigureServicesFilter>(new TestStartupServicesFilter(2, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:42:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:44:        serviceCollection.AddSingleton<IStartupConfigureServicesFilter>(new TestStartupServicesFilter(1, overrideAfterService: false));
./Hosting/Hosting/test/StartupManagerTests.cs:45:        serviceCollection.AddSingleton<IStartupConfigureServicesFilter>(new TestStartupServicesFilter(2, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:64:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:66:        serviceCollection.AddSingleton<IStartupConfigureServicesFilter>(new TestStartupServicesFilter(1, overrideAfterService: false));
./Hosting/Hosting/test/StartupManagerTests.cs:88:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:90:        serviceCollection.AddSingleton<IStartupConfigureContainerFilter<MyContainer>>(new TestConfigureContainerFilter(1, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:91:        serviceCollection.AddSingleton<IStartupConfigureContainerFilter<MyContainer>>(new TestConfigureContainerFilter(2, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:110:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:112:        serviceCollection.AddSingleton<IStartupConfigureContainerFilter<MyContainer>>(new TestConfigureContainerFilter(1, overrideAfterService: false));
./Hosting/Hosting/test/StartupManagerTests.cs:113:        serviceCollection.AddSingleton<IStartupConfigureContainerFilter<MyContainer>>(new TestConfigureContainerFilter(2, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:132:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:134:        serviceCollection.AddSingleton<IStartupConfigureServicesFilter>(new TestStartupServicesFilter(1, overrideAfterService: false));
./Hosting/Hosting/test/StartupManagerTests.cs:135:        serviceCollection.AddSingleton<IStartupConfigureContainerFilter<MyContainer>>(new TestConfigureContainerFilter(2, overrideAfterService: true));
./Hosting/Hosting/test/StartupManagerTests.cs:154:            services.Services.TryAddSingleton(new ServiceBefore { Message = "Configure container" });
./Hosting/Hosting/test/StartupManagerTests.cs:155:            services.Services.TryAddSingleton(new ServiceAfter { Message = "Configure container" });
./Hosting/Hosting/test/StartupManagerTests.cs:167:            services.TryAddSingleton(new ServiceBefore { Message = "Configure services" });
./Hosting/Hosting/test/StartupManagerTests.cs:168:            services.TryAddSingleton(new ServiceAfter { Message = "Configure services" });
./Hosting/Hosting/test/StartupManagerTests.cs:173:            services.Services.TryAddSingleton(new ServiceBefore { Message = "Configure container" });
./Hosting/Hosting/test/StartupManagerTests.cs:174:            services.Services.TryAddSingleton(new ServiceAfter { Message = "Configure container" });
./Hosting/Hosting/test/StartupManagerTests.cs:199:                services.Services.TryAddSingleton(new ServiceBefore { Message = $"ConfigureContainerFilter Before {AdditionalData}" });
./Hosting/Hosting/test/StartupManagerTests.cs:206:                    services.Services.AddSingleton(new ServiceAfter { Message = $"ConfigureContainerFilter After {AdditionalData}" });
./Hosting/Hosting/test/StartupManagerTests.cs:210:                    services.Services.TryAddSingleton(new ServiceAfter { Message = $"ConfigureContainerFilter After {AdditionalData}" });
./Hosting/Hosting/test/StartupManagerTests.cs:220:            services.TryAddSingleton(new ServiceBefore { Message = "Configure services" });
./Hosting/Hosting/test/StartupManagerTests.cs:221:            services.TryAddSingleton(new ServiceAfter { Message = "Configure services" });
./Hosting/Hosting/test/StartupManagerTests.cs:248:                services.TryAddSingleton(new ServiceBefore { Message = $"StartupServicesFilter Before {AdditionalData}" });
./Hosting/Hosting/test/StartupManagerTests.cs:255:                    services.AddSingleton(new ServiceAfter { Message = $"StartupServicesFilter After {AdditionalData}" });
./Hosting/Hosting/test/StartupManagerTests.cs:259:                    services.TryAddSingleton(new ServiceAfter { Message = $"StartupServicesFilter After {AdditionalData}" });
./Hosting/Hosting/test/StartupManagerTests.cs:269:            services.TryAddSingleton(new ServiceBefore { Message = "Configure services" });
./Hosting/Hosting/test/StartupManagerTests.cs:270:            services.TryAddSingleton(new ServiceAfter { Message = "Configure services" });
./Hosting/Hosting/test/StartupManagerTests.cs:293:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:294:        serviceCollection.AddSingleton<IFakeStartupCallback>(callbackStartup);
./Hosting/Hosting/test/StartupManagerTests.cs:311:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>>(new DefaultServiceProviderFactory(new ServiceProviderOptions
./Hosting/Hosting/test/StartupManagerTests.cs:344:            .AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>()
./Hosting/Hosting/test/StartupManagerTests.cs:363:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:364:        serviceCollection.AddSingleton<IFakeStartupCallback>(new FakeStartupCallback());
./Hosting/Hosting/test/StartupManagerTests.cs:391:            .AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>()
./Hosting/Hosting/test/StartupManagerTests.cs:410:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:411:        serviceCollection.AddSingleton<IFakeStartupCallback>(new FakeStartupCallback());
./Hosting/Hosting/test/StartupManagerTests.cs:424:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:425:        serviceCollection.AddSingleton<IFakeStartupCallback>(new FakeStartupCallback());
./Hosting/Hosting/test/StartupManagerTests.cs:439:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:440:        serviceCollection.AddSingleton<IFakeStartupCallback>(new FakeStartupCallback());
./Hosting/Hosting/test/StartupManagerTests.cs:453:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:470:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:488:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:506:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:521:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:535:        serviceCollection.AddSingleton<IServiceProviderFactory<IServiceCollection>, DefaultServiceProviderFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:550:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:566:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:582:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:618:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:628:        serviceCollection.AddSingleton<IServiceProviderFactory<MyContainer>, MyBadContainerFactory>();
./Hosting/Hosting/test/StartupManagerTests.cs:734:            services.AddSingleton<SimpleService>();
./Hosting/Hosting/test/WebHostBuilderTests.cs:437:                services.AddSingleton(sp => service);
./Hosting/Hosting/test/WebHostBuilderTests.cs:875:            .ConfigureServices(collection => collection.AddSingleton<ILoggerFactory>(factory))
./Hosting/Hosting/test/WebHostBuilderTests.cs:968:            services.AddSingleton(sp =>
./Hosting/Hosting/test/WebHostBuilderTests.cs:981:                services.AddSingleton<IServiceProviderFactory<IServiceCollection>>(containerFactory);
./Hosting/Hosting/test/WebHostBuilderTests.cs:1293:                services.AddSingleton<IStartupFilter, MyStartupFilter>();
./Hosting/Hosting/test/WebHostBuilderTests.cs:1395:                services.AddSingleton<StartOrder>();
./Hosting/Hosting/test/WebHostBuilderTests.cs:1397:                services.AddSingleton<IServer, ServerMustBeStartedSecond>();
./Hosting/Hosting/test/WebHostBuilderTests.cs:1645:            services.AddSingleton(this);
./Hosting/Hosting/test/WebHostBuilderTests.cs:1686:                   .ConfigureServices(services => services.AddSingleton<ServiceA>())
./Hosting/Hosting/test/WebHostBuilderTests.cs:1687:                   .ConfigureServices(services => services.AddSingleton<ITestSink>(loggerProvider.Sink))
./Hosting/Hosting/test/WebHostTests.cs:216:                services.AddSingleton(server.Object);
./Hosting/Hosting/test/WebHostTests.cs:255:                services.AddSingleton(server.Object);
./Hosting/Hosting/test/WebHostTests.cs:291:                services.AddSingleton(server.Object);
./Hosting/Hosting/test/WebHostTests.cs:377:                s.AddSingleton<IFakeSingletonService, FakeService>();
./Hosting/Hosting/test/WebHostTests.cs:504:                services.AddSingleton<IHostedService>(_ => new DelegateHostedService(started, stopping, disposing));
./Hosting/Hosting/test/WebHostTests.cs:527:                   services.AddSingleton<IHostedService, TestHostedService>();
./Hosting/Hosting/test/WebHostTests.cs:594:                services.AddSingleton<IHostedService>(_ => new DelegateHostedService(started, stopping, disposing));
./Hosting/Hosting/test/WebHostTests.cs:647:                services.AddSingleton<IHostedService>(_ => new DelegateHostedService(started, stopping, disposing));
./Hosting/Hosting/test/WebHostTests.cs:1050:               services.AddSingleton(server.Object);
./Hosting/Hosting/test/WebHostTests.cs:1069:               services.AddSingleton(server.Object);
./Hosting/Hosting/test/WebHostTests.cs:1070:               services.AddSingleton<IHostedService, TestHostedService>();
./Hosting/Hosting/test/WebHostTests.cs:1125:        services.AddSingleton<IHostedService>(new DelegateHostedService(started, stopping, () => { }));
./Hosting/Hosting/test/WebHostTests.cs:1457:        return builder.ConfigureServices(services => services.AddSingleton<IServer, WebHostTests.FakeServer>());
./Hosting/samples/SampleStartups/StartupFullControl.cs:47:                services.AddSingleton<IMyCustomService, MyCustomService>();
./Hosting/test/testassets/IStartupInjectionAssemblyName/Program.cs:24:        .ConfigureServices(services => services.AddSingleton<IStartup, Startup>());
./Hosting/TestHost/src/WebHostBuilderExtensions.cs:28:            services.AddSingleton<IHostLifetime, NoopHostLifetime>();
./Hosting/TestHost/src/WebHostBuilderExtensions.cs:29:            services.AddSingleton<IServer, TestServer>();
./Hosting/TestHost/src/WebHostBuilderExtensions.cs:44:            services.AddSingleton<IHostLifetime, NoopHostLifetime>();
./Hosting/TestHost/src/WebHostBuilderExtensions.cs:45:            services.AddSingleton<IServer, TestServer>();
./Hosting/TestHost/src/WebHostBuilderExtensions.cs:89:                s => s.AddSingleton<IStartupConfigureServicesFilter>(
./Hosting/TestHost/src/WebHostBuilderExtensions.cs:111:            s => s.AddSingleton<IStartupConfigureContainerFilter<TContainer>>(
./Hosting/TestHost/test/ClientHandlerTests.cs:695:                services.AddSingleton<ILogger<IWebHost>>(logger);
./Hosting/TestHost/test/HttpContextBuilderTests.cs:310:                services.AddSingleton<ILogger<IWebHost>>(logger);
./Hosting/TestHost/test/TestClientTests.cs:604:                services.AddSingleton<ILogger<IWebHost>>(logger);
./Hosting/TestHost/test/TestClientTests.cs:724:            .ConfigureServices(services => services.AddSingleton<ILogger<IWebHost>>(logger))
./Hosting/TestHost/test/TestServerTests.cs:32:                        services.AddSingleton<IServer>(serviceProvider => new TestServer(serviceProvider));
./Hosting/TestHost/test/TestServerTests.cs:125:            .ConfigureServices(s => s.AddSingleton<IServiceProviderFactory<ThirdPartyContainer>, ThirdPartyContainerServiceProviderFactory>())
./Hosting/TestHost/test/TestServerTests.cs:127:            .ConfigureTestServices(services => services.AddSingleton(new SimpleService { Message = "OverridesConfigureServices" }))
./Hosting/TestHost/test/TestServerTests.cs:128:            .ConfigureTestContainer<ThirdPartyContainer>(container => container.Services.AddSingleton(new TestService { Message = "OverridesConfigureContainer" }));
./Hosting/TestHost/test/TestServerTests.cs:140:            services.AddSingleton(new SimpleService { Message = "ConfigureServices" });
./Hosting/TestHost/test/TestServerTests.cs:143:            container.Services.AddSingleton(new TestService { Message = "ConfigureContainer" });
./Hosting/TestHost/test/TestServerTests.cs:184:                services.AddSingleton(testService);
./Hosting/TestHost/test/TestServerTests.cs:328:            .ConfigureServices(services => services.AddSingleton(testService))
./Hosting/TestHost/test/TestServerTests.cs:348:                    .ConfigureServices(services => services.AddSingleton(testService))
./Hosting/TestHost/test/TestServerTests.cs:506:            services.AddSingleton<IStartupFilter>(new ReplaceServiceProvidersFeatureFilter(appServices, appServices));
./Hosting/TestHost/test/TestServerTests.cs:585:            services.AddSingleton<IHttpContextAccessor, HttpContextAccessor>();
./Hosting/TestHost/test/TestServerTests.cs:616:            services.AddSingleton<IHttpContextAccessor, HttpContextAccessor>();
./Hosting/TestHost/test/TestServerTests.cs:617:            services.AddSingleton<ContextHolder>();
./Hosting/TestHost/test/TestServerTests.cs:894:            services.AddSingleton<SimpleService>();
./Http/Authentication.Core/src/AuthenticationCoreServiceCollectionExtensions.cs:24:        services.TryAddSingleton<IClaimsTransformation, NoopClaimsTransformation>(); // Can be replaced with scoped ones that use DbContext
./Http/Authentication.Core/src/AuthenticationCoreServiceCollectionExtensions.cs:26:        services.TryAddSingleton<IAuthenticationSchemeProvider, AuthenticationSchemeProvider>();
./Http/Authentication.Core/test/AuthenticationSchemeProviderTests.cs:179:            .AddSingleton<IAuthenticationSchemeProvider, IgnoreCaseSchemeProvider>()
./Http/Authentication.Core/test/AuthenticationServiceTests.cs:35:            .AddSingleton<IClaimsTransformation>(transform)
./Http/Http/src/HttpServiceCollectionExtensions.cs:23:        services.TryAddSingleton<IHttpContextAccessor, HttpContextAccessor>();
./Http/Http/test/ResponseCookiesTest.cs:34:        services.AddSingleton<ILoggerFactory>(loggerFactory);
./Http/Http.Extensions/src/ProblemDetailsServiceCollectionExtensions.cs:41:        services.TryAddSingleton<IProblemDetailsService, ProblemDetailsService>();
./Http/Http.Extensions/test/ProblemDetailsDefaultWriterTest.cs:556:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Extensions/test/ProblemDetailsServiceCollectionExtensionsTest.cs:74:        collection.AddSingleton(typeof(IProblemDetailsService), customService);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:2176:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:2744:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:2745:        serviceCollection.AddSingleton(myOriginalService);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:2746:        serviceCollection.AddSingleton<IMyService>(myOriginalService);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3131:            .AddSingleton(LoggerFactory)
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3132:            .AddSingleton(Options.Create(new JsonOptions()))
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3158:            .AddSingleton(LoggerFactory)
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3159:            .AddSingleton(Options.Create(new JsonOptions()))
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3185:            .AddSingleton(LoggerFactory)
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3186:            .AddSingleton(Options.Create(new JsonOptions()))
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3223:            .AddSingleton(LoggerFactory)
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3249:            .AddSingleton(LoggerFactory)
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3757:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3758:        serviceCollection.AddSingleton(Options.Create(jsonOptions));
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3926:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:3931:            serviceCollection.AddSingleton(service);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:4129:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:4177:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:4886:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:7174:        var serviceProvider = new ServiceCollection().AddSingleton(metadataService).BuildServiceProvider();
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:7189:        var serviceProvider = new ServiceCollection().AddSingleton(metadataService).BuildServiceProvider();
./Http/Http.Extensions/test/RequestDelegateFactoryTests.cs:7428:            RequestServices = new ServiceCollection().AddSingleton(LoggerFactory).BuildServiceProvider(),
./Http/Http.Extensions/test/RequestDelegateGenerator/RequestDelegateGeneratorTestBase.cs:180:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Http.Extensions/test/RequestDelegateGenerator/RequestDelegateGeneratorTestBase.cs:182:        serviceCollection.AddSingleton(Options.Create(jsonOptions));
./Http/Http.Extensions/test/RequestDelegateGenerator/RequestDelegateGeneratorTests.cs:1015:            serviceCollection.AddSingleton<TestService>(new TestService());
./Http/Http.Extensions/test/RequestDelegateGenerator/RequestDelegateGeneratorTests.cs:1044:        serviceCollection.AddSingleton<TestService>(new TestService());
./Http/Http.Results/test/AcceptedAtRouteOfTResultTests.cs:223:        services.AddSingleton(linkGenerator);
./Http/Http.Results/test/AcceptedAtRouteResultTests.cs:133:        services.AddSingleton(linkGenerator);
./Http/Http.Results/test/BadRequestOfTResultTests.cs:182:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/BadRequestResultTests.cs:95:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/ChallengeResultTests.cs:59:            .AddSingleton(auth.Object)
./Http/Http.Results/test/ChallengeResultTests.cs:67:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/ChallengeResultTests.cs:68:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/ConflictOfTResultTests.cs:160:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/ConflictResultTests.cs:96:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/ContentResultTests.cs:173:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/ContentResultTests.cs:174:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/CreatedAtRouteOfTResultTests.cs:191:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/CreatedAtRouteOfTResultTests.cs:192:        services.AddSingleton<LinkGenerator>(linkGenerator);
./Http/Http.Results/test/CreatedAtRouteResultTests.cs:137:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/CreatedAtRouteResultTests.cs:138:        services.AddSingleton<LinkGenerator>(linkGenerator);
./Http/Http.Results/test/CreatedOfTResultTests.cs:188:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/CreatedResultTests.cs:125:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/FileContentResultTests.cs:30:            .AddSingleton(typeof(ILogger<>), typeof(NullLogger<>))
./Http/Http.Results/test/FileContentResultTests.cs:31:            .AddSingleton<ILoggerFactory, NullLoggerFactory>()
./Http/Http.Results/test/ForbidResultTests.cs:126:            .AddSingleton(auth)
./Http/Http.Results/test/ForbidResultTests.cs:134:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/ForbidResultTests.cs:135:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/HttpResultsHelperTests.cs:193:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/JsonResultTests.cs:318:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/LocalRedirectResultTests.cs:124:        serviceCollection.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/NoContentResultTests.cs:92:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/NoContentResultTests.cs:93:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/NotFoundOfTResultTests.cs:151:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/NotFoundResultTests.cs:100:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/OkOfTResultTests.cs:159:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/OkResultTests.cs:94:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/ProblemResultTests.cs:224:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/RedirectToRouteResultTests.cs:111:        services.AddSingleton<LinkGenerator>(new TestLinkGenerator { Url = path });
./Http/Http.Results/test/RedirectToRouteResultTests.cs:113:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/RedirectToRouteResultTests.cs:114:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/ResultsOfTTests.cs:56:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/ResultsOfTTests.cs:57:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/SignInResultTests.cs:92:            .AddSingleton(auth)
./Http/Http.Results/test/SignInResultTests.cs:100:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/SignInResultTests.cs:101:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/SignOutResultTests.cs:91:            .AddSingleton(auth)
./Http/Http.Results/test/SignOutResultTests.cs:99:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/SignOutResultTests.cs:100:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/StatusCodeResultTests.cs:49:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/StatusCodeResultTests.cs:50:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/UnauthorizedResultTests.cs:59:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/UnauthorizedResultTests.cs:60:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/UnprocessableEntityOfTResultTests.cs:159:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/UnprocessableEntityResultTests.cs:95:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Http/Http.Results/test/Utf8ContentResultTests.cs:91:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Http/Http.Results/test/Utf8ContentResultTests.cs:92:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Http.Results/test/ValidationProblemResultTests.cs:148:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Owin/test/OwinExtensionTests.cs:41:        new ServiceCollection().AddSingleton(new FakeService()).BuildServiceProvider());
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:48:        services.TryAddSingleton<ObjectPool<UriBuildingContext>>(s =>
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:64:        services.TryAddSingleton(typeof(RoutingMarkerService));
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:72:        services.TryAddSingleton<EndpointDataSource>(s =>
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:81:        services.TryAddSingleton<ParameterPolicyFactory, DefaultParameterPolicyFactory>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:82:        services.TryAddSingleton<MatcherFactory, DfaMatcherFactory>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:84:        services.TryAddSingleton<DfaGraphWriter>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:86:        services.TryAddSingleton<EndpointMetadataComparer>(services =>
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:93:        services.TryAddSingleton<LinkGenerator, DefaultLinkGenerator>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:94:        services.TryAddSingleton<IEndpointAddressScheme<string>, EndpointNameAddressScheme>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:95:        services.TryAddSingleton<IEndpointAddressScheme<RouteValuesAddress>, RouteValuesAddressScheme>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:96:        services.TryAddSingleton<LinkParser, DefaultLinkParser>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:101:        services.TryAddSingleton<EndpointSelector, DefaultEndpointSelector>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:109:        services.TryAddSingleton<TemplateBinderFactory, DefaultTemplateBinderFactory>();
./Http/Routing/src/DependencyInjection/RoutingServiceCollectionExtensions.cs:110:        services.TryAddSingleton<RoutePatternTransformer, DefaultRoutePatternTransformer>();
./Http/Routing/test/testassets/RoutingSandbox/UseEndpointRoutingStartup.cs:20:        services.AddSingleton<FrameworkEndpointDataSource>();
./Http/Routing/test/UnitTests/Builder/EndpointRoutingApplicationBuilderExtensionsTest.cs:354:            services.AddSingleton<MatcherFactory>(matcherFactory);
./Http/Routing/test/UnitTests/Builder/EndpointRoutingApplicationBuilderExtensionsTest.cs:361:        services.AddSingleton(listener);
./Http/Routing/test/UnitTests/Builder/EndpointRoutingApplicationBuilderExtensionsTest.cs:362:        services.AddSingleton<DiagnosticSource>(listener);
./Http/Routing/test/UnitTests/Builder/EndpointRoutingApplicationBuilderExtensionsTest.cs:363:        services.AddSingleton(Mock.Of<IHostEnvironment>());
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:263:        var builder = new DefaultEndpointRouteBuilder(new ApplicationBuilder(new ServiceCollection().AddSingleton<TodoService>().BuildServiceProvider()));
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:283:        var builder = new DefaultEndpointRouteBuilder(new ApplicationBuilder(new ServiceCollection().AddSingleton<TodoService>().BuildServiceProvider()));
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:303:        var builder = new DefaultEndpointRouteBuilder(new ApplicationBuilder(new ServiceCollection().AddSingleton<TodoService>().BuildServiceProvider()));
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:327:        var builder = new DefaultEndpointRouteBuilder(new ApplicationBuilder(new ServiceCollection().AddSingleton<TodoService>().BuildServiceProvider()));
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:347:        var builder = new DefaultEndpointRouteBuilder(new ApplicationBuilder(new ServiceCollection().AddSingleton<TodoService>().BuildServiceProvider()));
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:367:        var builder = new DefaultEndpointRouteBuilder(new ApplicationBuilder(new ServiceCollection().AddSingleton<TodoService>().BuildServiceProvider()));
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:971:        serviceCollection.AddSingleton(LoggerFactory);
./Http/Routing/test/UnitTests/Builder/RouteHandlerEndpointRouteBuilderExtensionsTest.cs:990:        appServiceCollection.AddSingleton(appService);
./Http/Routing/test/UnitTests/DefaultLinkGeneratorTest.cs:731:        services.AddSingleton<IEndpointAddressScheme<int>, IntAddressScheme>();
./Http/Routing/test/UnitTests/DefaultLinkParserTest.cs:27:        var parser = CreateLinkParser(services => { services.AddSingleton<ILoggerFactory>(loggerFactory); }, endpoint);
./Http/Routing/test/UnitTests/DefaultLinkParserTest.cs:49:        var parser = CreateLinkParser(services => { services.AddSingleton<ILoggerFactory>(loggerFactory); }, endpoint1, endpoint2);
./Http/Routing/test/UnitTests/DefaultLinkParserTest.cs:73:        var parser = CreateLinkParser(services => { services.AddSingleton<ILoggerFactory>(loggerFactory); }, endpoint0, endpoint1, endpoint2);
./Http/Routing/test/UnitTests/DefaultLinkParserTest.cs:160:        services.AddSingleton<IEndpointAddressScheme<int>, IntAddressScheme>();
./Http/Routing/test/UnitTests/Matching/DfaMatcherTest.cs:41:                serviceCollection.AddSingleton<MatcherPolicy>(policies[i]);
./Http/Routing/test/UnitTests/Matching/DfaMatcherTest.cs:47:            serviceCollection.AddSingleton<EndpointSelector>(endpointSelector);
./Http/Routing/test/UnitTests/Matching/DfaMatcherTest.cs:52:            serviceCollection.AddSingleton<ILoggerFactory>(loggerFactory);
./Http/Routing/test/UnitTests/RouteBuilderTest.cs:17:        services.AddSingleton(typeof(RoutingMarkerService));
./Http/Routing/test/UnitTests/RouteCollectionTest.cs:621:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Routing/test/UnitTests/RouteHandlerOptionsTests.cs:23:        services.AddSingleton<IHostEnvironment>(new HostEnvironment
./Http/Routing/test/UnitTests/RouteHandlerOptionsTests.cs:43:        services.AddSingleton<IHostEnvironment>(new HostEnvironment
./Http/Routing/test/UnitTests/RouteTest.cs:654:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Routing/test/UnitTests/RouteTest.cs:658:        services.AddSingleton<UrlEncoder>(new UrlTestEncoder());
./Http/Routing/test/UnitTests/RouteTest.cs:1516:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Http/Routing/test/UnitTests/RouteTest.cs:1761:        services.AddSingleton<IInlineConstraintResolver>(_inlineConstraintResolver);
./Http/Routing/test/UnitTests/RouteTest.cs:1762:        services.AddSingleton<RoutingMarkerService>();
./Http/Routing/test/UnitTests/RouteTest.cs:1763:        services.AddSingleton<ParameterPolicyFactory, DefaultParameterPolicyFactory>();
./Http/Routing/test/UnitTests/TemplateParserDefaultValuesTests.cs:129:        services.AddSingleton<IInlineConstraintResolver>(_inlineConstraintResolver);
./Http/Routing/test/UnitTests/TemplateParserDefaultValuesTests.cs:130:        services.AddSingleton<RoutingMarkerService>();
./Http/Routing/test/UnitTests/TemplateParserDefaultValuesTests.cs:131:        services.AddSingleton<ParameterPolicyFactory, DefaultParameterPolicyFactory>();
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:33:        services.AddSingleton<IConcurrentPolicyRegistry<string>>(registry);
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:34:        services.AddSingleton<IPolicyRegistry<string>>(registry);
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:35:        services.AddSingleton<IReadOnlyPolicyRegistry<string>>(registry);
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:60:        services.AddSingleton<IPolicyRegistry<string>>(registry);
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:61:        services.AddSingleton<IReadOnlyPolicyRegistry<string>>(registry);
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:65:            services.AddSingleton<IConcurrentPolicyRegistry<string>>(concurrentRegistry);
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:93:        services.AddSingleton(serviceProvider =>
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:102:        services.AddSingleton<IConcurrentPolicyRegistry<string>>(serviceProvider => serviceProvider.GetRequiredService<PolicyRegistry>());
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:103:        services.AddSingleton<IPolicyRegistry<string>>(serviceProvider => serviceProvider.GetRequiredService<PolicyRegistry>());
./HttpClientFactory/Polly/src/DependencyInjection/PollyServiceCollectionExtensions.cs:104:        services.AddSingleton<IReadOnlyPolicyRegistry<string>>(serviceProvider => serviceProvider.GetRequiredService<PolicyRegistry>());
./HttpClientFactory/Polly/test/DependencyInjection/PollyHttpClientBuilderExtensionsTest.cs:428:        serviceCollection.AddSingleton(options);
./Identity/ApiAuthorization.IdentityServer/src/Authentication/AuthenticationBuilderExtensions.cs:34:        services.TryAddSingleton<IIdentityServerJwtDescriptor, IdentityServerJwtDescriptor>();
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:104:        builder.Services.AddSingleton<IEnumerable<ApiResource>>(sp =>
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:118:        builder.Services.AddSingleton<IEnumerable<ApiScope>>(sp =>
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:160:        builder.Services.AddSingleton<IEnumerable<IdentityResource>>(sp =>
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:203:        builder.Services.AddSingleton<IEnumerable<Client>>(sp =>
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:243:        builder.Services.AddSingleton<ISigningCredentialStore>(sp =>
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:250:        builder.Services.AddSingleton<IValidationKeysStore>(sp =>
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:277:        builder.Services.TryAddSingleton<IAbsoluteUrlFactory, AbsoluteUrlFactory>();
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:278:        builder.Services.AddSingleton<IRedirectUriValidator, RelativeRedirectUriValidator>();
./Identity/ApiAuthorization.IdentityServer/src/IdentityServerBuilderConfigurationExtensions.cs:279:        builder.Services.AddSingleton<IClientRequestParametersProvider, DefaultClientRequestParametersProvider>();
./Identity/ApiAuthorization.IdentityServer/test/Authentication/IdentityServerJwtBearerConfigurationTest.cs:70:                        .AddSingleton(new IdentityServerOptions())
./Identity/ApiAuthorization.IdentityServer/test/Authentication/IdentityServerJwtBearerConfigurationTest.cs:71:                        .AddSingleton(credentialsStore.Object)
./Identity/ApiAuthorization.IdentityServer/test/Authentication/IdentityServerJwtBearerConfigurationTest.cs:72:                        .AddSingleton(issuerName.Object)
./Identity/ApiAuthorization.IdentityServer/test/Authentication/IdentityServerJwtBearerConfigurationTest.cs:123:            .AddSingleton(new IdentityServerOptions())
./Identity/ApiAuthorization.IdentityServer/test/Extensions/AutoRedirectEndSessionEndpointTests.cs:280:        collection.AddSingleton(authService.Object);
./Identity/ApiAuthorization.IdentityServer/test/Extensions/DefaultClientRequestParametersProviderTests.cs:38:            .AddSingleton(new IdentityServerOptions())
./Identity/ApiAuthorization.IdentityServer/test/Extensions/DefaultClientRequestParametersProviderTests.cs:39:            .AddSingleton<IIssuerNameService>(new NameService())
./Identity/ApiAuthorization.IdentityServer/test/Extensions/IdentityServerBuilderConfigurationExtensionsTests.cs:34:            .AddSingleton(configuration)
./Identity/ApiAuthorization.IdentityServer/test/Extensions/IdentityServerBuilderConfigurationExtensionsTests.cs:35:            .AddSingleton(environment)
./Identity/ApiAuthorization.IdentityServer/test/Extensions/IdentityServerBuilderConfigurationExtensionsTests.cs:64:            .AddSingleton(configuration)
./Identity/ApiAuthorization.IdentityServer/test/Extensions/IdentityServerBuilderConfigurationExtensionsTests.cs:65:            .AddSingleton(environment)
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/InMemoryEFOnlyUsersTest.cs:27:        => services.AddSingleton<IUserStore<IdentityUser>>(new UserStore<IdentityUser, IdentityRole, DbContext, string, IdentityUserClaim<string>, IdentityUserRole<string>, IdentityUserLogin<string>, IdentityUserToken<string>, IdentityRoleClaim<string>>((InMemoryContext<IdentityUser>)context, new IdentityErrorDescriber()));
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/InMemoryEFUserStoreTest.cs:25:        services.AddSingleton<IUserStore<IdentityUser>>(new UserStore<IdentityUser>((InMemoryContext)context));
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/InMemoryEFUserStoreTest.cs:31:        services.AddSingleton<IRoleStore<IdentityRole>>(store);
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/InMemoryStoreWithGenericsTest.cs:44:        services.AddSingleton<IUserStore<IdentityUserWithGenerics>>(_store);
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/InMemoryStoreWithGenericsTest.cs:49:        services.AddSingleton<IRoleStore<MyIdentityRole>>(new RoleStoreWithGenerics((InMemoryContextWithGenerics)context, "TestContext"));
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/RoleStoreTest.cs:31:        services.AddSingleton(InMemoryContext.Create(_fixture.Connection));
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/RoleStoreTest.cs:33:        services.AddSingleton<RoleManager<IdentityRole>>();
./Identity/EntityFrameworkCore/test/EF.InMemory.Test/TestIdentityFactory.cs:26:        services.AddSingleton<IRoleStore<IdentityRole>>(new RoleStore<IdentityRole>(context));
./Identity/EntityFrameworkCore/test/EF.Test/CustomSchemaTest.cs:22:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/DefaultPocoTest.cs:23:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/EmptySchemaTest.cs:22:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/MaxKeyLengthSchemaTest.cs:23:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreOnlyUsersTestBase.cs:64:        services.AddSingleton<IUserStore<TUser>>(new UserOnlyStore<TUser, TestUserDbContext, TKey>((TestUserDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreTestBase.cs:51:        services.AddSingleton((TestDbContext)context);
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreTestBase.cs:53:        services.AddSingleton<ILogger<UserManager<TUser>>>(new TestLogger<UserManager<TUser>>());
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreTestBase.cs:54:        services.AddSingleton<ILogger<RoleManager<TRole>>>(new TestLogger<RoleManager<TRole>>());
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreTestBase.cs:55:        services.AddSingleton<IDataProtectionProvider, EphemeralDataProtectionProvider>();
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreTestBase.cs:109:        services.AddSingleton<IUserStore<TUser>>(new UserStore<TUser, TRole, TestDbContext, TKey>((TestDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/SqlStoreTestBase.cs:114:        services.AddSingleton<IRoleStore<TRole>>(new RoleStore<TRole, TestDbContext, TKey>((TestDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/UserOnlyCustomContextTest.cs:67:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/UserOnlyTest.cs:28:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreGuidKeyTest.cs:46:        services.AddSingleton<IUserStore<GuidUser>>(new ApplicationUserStore((TestDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreGuidKeyTest.cs:51:        services.AddSingleton<IRoleStore<GuidRole>>(new ApplicationRoleStore((TestDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreGuidKeyTest.cs:59:            .AddSingleton(new TestDbContext(new DbContextOptionsBuilder<TestDbContext>().Options));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreGuidKeyTest.cs:76:            .AddSingleton(new TestDbContext(new DbContextOptionsBuilder<TestDbContext>().Options));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreIntKeyTest.cs:37:            .AddSingleton(new TestDbContext(new DbContextOptionsBuilder<TestDbContext>().Options));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreIntKeyTest.cs:54:            .AddSingleton(new TestDbContext(new DbContextOptionsBuilder<TestDbContext>().Options));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreStringKeyTest.cs:38:            .AddSingleton(new TestDbContext(new DbContextOptionsBuilder<TestDbContext>().Options));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreStringKeyTest.cs:55:            .AddSingleton(new TestDbContext(new DbContextOptionsBuilder<TestDbContext>().Options));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreTest.cs:55:        services.AddSingleton<IUserStore<IdentityUser>>(new UserStore<IdentityUser, IdentityRole, IdentityDbContext>((IdentityDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreTest.cs:60:        services.AddSingleton<IRoleStore<IdentityRole>>(new RoleStore<IdentityRole, IdentityDbContext>((IdentityDbContext)context));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreWithGenericsTest.cs:36:        services.AddSingleton<IUserStore<IdentityUserWithGenerics>>(new UserStoreWithGenerics((ContextWithGenerics)context, "TestContext"));
./Identity/EntityFrameworkCore/test/EF.Test/UserStoreWithGenericsTest.cs:41:        services.AddSingleton<IRoleStore<MyIdentityRole>>(new RoleStoreWithGenerics((ContextWithGenerics)context, "TestContext"));
./Identity/EntityFrameworkCore/test/EF.Test/VersionOneSchemaTest.cs:22:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/EntityFrameworkCore/test/EF.Test/VersionTwoSchemaTest.cs:22:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/Extensions.Core/src/IdentityBuilder.cs:219:        Services.AddSingleton<IPersonalDataProtector, DefaultPersonalDataProtector>();
./Identity/Extensions.Core/src/IdentityBuilder.cs:220:        Services.AddSingleton<ILookupProtector, TProtector>();
./Identity/Extensions.Core/src/IdentityBuilder.cs:221:        Services.AddSingleton<ILookupProtectorKeyRing, TKeyRing>();
./Identity/Specification.Tests/src/IdentitySpecificationTestBase.cs:43:        services.AddSingleton<IDataProtectionProvider, EphemeralDataProtectionProvider>();
./Identity/Specification.Tests/src/IdentitySpecificationTestBase.cs:55:        services.AddSingleton<ILogger<UserManager<TUser>>>(new TestLogger<UserManager<TUser>>());
./Identity/Specification.Tests/src/IdentitySpecificationTestBase.cs:56:        services.AddSingleton<ILogger<RoleManager<TRole>>>(new TestLogger<RoleManager<TRole>>());
./Identity/Specification.Tests/src/IdentitySpecificationTestBase.cs:70:        services.AddSingleton<ILogger<RoleManager<TRole>>>(new TestLogger<RoleManager<TRole>>());
./Identity/Specification.Tests/src/UserManagerSpecificationTests.cs:56:        services.AddSingleton<IDataProtectionProvider, EphemeralDataProtectionProvider>();
./Identity/Specification.Tests/src/UserManagerSpecificationTests.cs:67:        services.AddSingleton<ILogger<UserManager<TUser>>>(new TestLogger<UserManager<TUser>>());
./Identity/test/Identity.FunctionalTests/Infrastructure/FunctionalTestsServiceCollectionExtensions.cs:59:        services.AddSingleton(sender);
./Identity/test/Identity.FunctionalTests/RegistrationTests.cs:76:            services.AddSingleton<IEmailSender, FakeEmailSender>();
./Identity/test/Identity.Test/IdentityBuilderTest.cs:57:           .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:67:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:78:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:93:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:108:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:118:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:128:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:138:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:150:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:162:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/test/Identity.Test/IdentityBuilderTest.cs:179:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:203:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:215:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/IdentityBuilderTest.cs:226:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:118:        services.AddSingleton(options.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:119:        services.AddSingleton(signInManager.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:120:        services.AddSingleton<ISecurityStampValidator>(new SecurityStampValidator<PocoUser>(options.Object, signInManager.Object, new SystemClock(), new LoggerFactory()));
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:121:        services.AddSingleton(authService.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:172:        services.AddSingleton(options.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:173:        services.AddSingleton(signInManager);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:174:        services.AddSingleton<ISecurityStampValidator>(new SecurityStampValidator<PocoUser>(options.Object, signInManager, new SystemClock(), new LoggerFactory()));
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:213:        services.AddSingleton(options.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:214:        services.AddSingleton(signInManager.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:215:        services.AddSingleton<ISecurityStampValidator>(new SecurityStampValidator<PocoUser>(options.Object, signInManager.Object, new SystemClock(), new LoggerFactory()));
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:216:        services.AddSingleton(authService.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:251:        services.AddSingleton(options.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:252:        services.AddSingleton(signInManager.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:253:        services.AddSingleton<ISecurityStampValidator>(new SecurityStampValidator<PocoUser>(options.Object, signInManager.Object, new SystemClock(), new LoggerFactory()));
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:288:        services.AddSingleton(options.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:289:        services.AddSingleton(signInManager.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:295:        services.AddSingleton<ISecurityStampValidator>(new SecurityStampValidator<PocoUser>(options.Object, signInManager.Object, clock, new LoggerFactory()));
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:340:        services.AddSingleton(options.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:341:        services.AddSingleton(signInManager.Object);
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:342:        services.AddSingleton<ITwoFactorSecurityStampValidator>(new TwoFactorSecurityStampValidator<PocoUser>(options.Object, signInManager.Object, new SystemClock(), new LoggerFactory()));
./Identity/test/Identity.Test/SecurityStampValidatorTest.cs:343:        services.AddSingleton(authService.Object);
./Identity/test/Identity.Test/SignInManagerTest.cs:733:        context.RequestServices = new ServiceCollection().AddSingleton(auth.Object).BuildServiceProvider();
./Identity/test/Identity.Test/UserManagerTest.cs:19:                .AddSingleton<IConfiguration>(config)
./Identity/test/Identity.Test/UserManagerTest.cs:34:                .AddSingleton<IConfiguration>(config)
./Identity/test/Identity.Test/UserManagerTest.cs:793:                .AddSingleton<IConfiguration>(config)
./Identity/test/Identity.Test/UserManagerTest.cs:890:                .AddSingleton<IConfiguration>(config)
./Identity/test/Identity.Test/UserManagerTest.cs:1746:                .AddSingleton<IConfiguration>(config)
./Identity/test/Identity.Test/UserManagerTest.cs:1748:                .AddSingleton<IdentityErrorDescriber>(describer)
./Identity/test/Identity.Test/UserManagerTest.cs:1749:                .AddSingleton<IUserStore<PocoUser>>(store.Object)
./Identity/test/InMemory.Test/ControllerTest.cs:32:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/test/InMemory.Test/ControllerTest.cs:34:            .AddSingleton(contextAccessor.Object);
./Identity/test/InMemory.Test/ControllerTest.cs:37:        services.AddSingleton<IUserStore<PocoUser>, InMemoryStore<PocoUser, PocoRole>>();
./Identity/test/InMemory.Test/ControllerTest.cs:38:        services.AddSingleton<IRoleStore<PocoRole>, InMemoryStore<PocoUser, PocoRole>>();
./Identity/test/InMemory.Test/ControllerTest.cs:84:            .AddSingleton<IConfiguration>(new ConfigurationBuilder().Build())
./Identity/test/InMemory.Test/ControllerTest.cs:86:            .AddSingleton(contextAccessor.Object);
./Identity/test/InMemory.Test/ControllerTest.cs:88:        services.AddSingleton<IUserStore<PocoUser>, InMemoryStore<PocoUser, PocoRole>>();
./Identity/test/InMemory.Test/ControllerTest.cs:89:        services.AddSingleton<IRoleStore<PocoRole>, InMemoryStore<PocoUser, PocoRole>>();
./Identity/test/InMemory.Test/ControllerTest.cs:111:        context.RequestServices = new ServiceCollection().AddSingleton(auth.Object).BuildServiceProvider();
./Identity/test/InMemory.Test/FunctionalTest.cs:78:            services.AddSingleton<ISystemClock>(clock);
./Identity/test/InMemory.Test/FunctionalTest.cs:115:        var server = await CreateServer(services => services.AddSingleton<ISystemClock>(clock), testCore: testCore);
./Identity/test/InMemory.Test/FunctionalTest.cs:173:            services.AddSingleton<ISystemClock>(clock);
./Identity/test/InMemory.Test/FunctionalTest.cs:214:        var server = await CreateServer(services => services.AddSingleton<ISystemClock>(clock), testCore: testCore);
./Identity/test/InMemory.Test/FunctionalTest.cs:243:        var server = await CreateServer(services => services.AddSingleton<ISystemClock>(clock), testCore: testCore);
./Identity/test/InMemory.Test/FunctionalTest.cs:384:                    services.AddSingleton<IUserStore<PocoUser>>(store);
./Identity/test/InMemory.Test/FunctionalTest.cs:385:                    services.AddSingleton<IRoleStore<PocoRole>>(store);
./Identity/test/InMemory.Test/InMemoryStoreTest.cs:20:        services.AddSingleton<IUserStore<PocoUser>>((InMemoryStore<PocoUser, PocoRole>)context);
./Identity/test/InMemory.Test/InMemoryStoreTest.cs:25:        services.AddSingleton<IRoleStore<PocoRole>>((InMemoryStore<PocoUser, PocoRole>)context);
./Identity/test/InMemory.Test/InMemoryUserStoreTest.cs:21:        services.AddSingleton<IUserStore<PocoUser>>((InMemoryUserStore<PocoUser>)context);
./Identity/testassets/Identity.DefaultUI.WebSite/PocoUserStartup.cs:26:        services.AddSingleton<IUserStore<Microsoft.AspNetCore.Identity.Test.PocoUser>, InMemoryUserStore<Microsoft.AspNetCore.Identity.Test.PocoUser>>();
./Identity/testassets/Identity.DefaultUI.WebSite/StartupBase.cs:47:        services.AddSingleton<IFileVersionProvider, FileVersionProvider>();
./Localization/Localization/src/LocalizationServiceCollectionExtensions.cs:55:        services.TryAddSingleton<IStringLocalizerFactory, ResourceManagerStringLocalizerFactory>();
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:64:            services.AddSingleton(context);
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:65:            services.AddSingleton<IOptionsChangeTokenSource<LoggerFilterOptions>>(
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:71:            services.AddSingleton<IConfigureOptions<LoggerFilterOptions>>(CreateFileFilterConfigureOptions(config));
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:72:            services.AddSingleton<IConfigureOptions<AzureFileLoggerOptions>>(new FileLoggerConfigureOptions(config, context));
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:73:            services.AddSingleton<IOptionsChangeTokenSource<AzureFileLoggerOptions>>(
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:80:            services.AddSingleton<IConfigureOptions<LoggerFilterOptions>>(CreateBlobFilterConfigureOptions(config));
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:81:            services.AddSingleton<IConfigureOptions<AzureBlobLoggerOptions>>(new BlobLoggerConfigureOptions(config, context, configureBlobLoggerOptions));
./Logging.AzureAppServices/src/AzureAppServicesLoggerFactoryExtensions.cs:82:            services.AddSingleton<IOptionsChangeTokenSource<AzureBlobLoggerOptions>>(
./Middleware/ConcurrencyLimiter/src/QueuePolicies/QueuePolicyServiceCollectionExtensions.cs:23:        services.AddSingleton<IQueuePolicy, QueuePolicy>();
./Middleware/ConcurrencyLimiter/src/QueuePolicies/QueuePolicyServiceCollectionExtensions.cs:37:        services.AddSingleton<IQueuePolicy, StackPolicy>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:173:                    services.AddSingleton<IDeveloperPageExceptionFilter, ExceptionMessageFilter>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:207:                    services.AddSingleton<IDeveloperPageExceptionFilter, PassThroughExceptionFilter>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:208:                    services.AddSingleton<IDeveloperPageExceptionFilter, AlwaysBadFormatExceptionFilter>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:209:                    services.AddSingleton<IDeveloperPageExceptionFilter, ExceptionMessageFilter>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:245:                    services.AddSingleton<IDeveloperPageExceptionFilter, AlwaysThrowSameMessageFilter>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:246:                    services.AddSingleton<IDeveloperPageExceptionFilter, ExceptionMessageFilter>();
./Middleware/Diagnostics/test/UnitTests/DeveloperExceptionPageMiddlewareTest.cs:247:                    services.AddSingleton<IDeveloperPageExceptionFilter, ExceptionToStringFilter>();
./Middleware/Diagnostics/test/UnitTests/ExceptionHandlerTest.cs:613:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HeaderPropagation/src/DependencyInjection/HeaderPropagationServiceCollectionExtensions.cs:24:        services.TryAddSingleton<HeaderPropagationValues>();
./Middleware/HostFiltering/sample/Startup.cs:37:        services.AddSingleton<IOptionsChangeTokenSource<HostFilteringOptions>>(new ConfigurationChangeTokenSource<HostFilteringOptions>(Config));
./Middleware/HostFiltering/test/HostFilteringMiddlewareTests.cs:242:                    services.AddSingleton<IOptionsChangeTokenSource<HostFilteringOptions>>(new ConfigurationChangeTokenSource<HostFilteringOptions>(config));
./Middleware/HttpLogging/src/HttpLoggingServicesExtensions.cs:40:        services.AddSingleton<W3CLoggerProcessor>();
./Middleware/HttpLogging/src/HttpLoggingServicesExtensions.cs:41:        services.AddSingleton<W3CLogger>();
./Middleware/HttpsPolicy/test/HstsMiddlewareTests.cs:186:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HstsMiddlewareTests.cs:236:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HstsMiddlewareTests.cs:291:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HstsMiddlewareTests.cs:343:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HstsMiddlewareTests.cs:390:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:34:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:84:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:140:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:245:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:331:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:384:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/HttpsPolicy/test/HttpsRedirectionMiddlewareTests.cs:426:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/Localization/test/UnitTests/CookieRequestCultureProviderTest.cs:204:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Localization/test/UnitTests/CookieRequestCultureProviderTest.cs:264:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/OutputCaching/src/OutputCacheServiceCollectionExtensions.cs:29:        services.TryAddSingleton<ObjectPoolProvider, DefaultObjectPoolProvider>();
./Middleware/OutputCaching/src/OutputCacheServiceCollectionExtensions.cs:31:        services.TryAddSingleton<IOutputCacheStore>(sp =>
./Middleware/RequestDecompression/src/RequestDecompressionServiceExtensions.cs:23:        services.TryAddSingleton<IRequestDecompressionProvider, DefaultRequestDecompressionProvider>();
./Middleware/RequestDecompression/src/RequestDecompressionServiceExtensions.cs:39:        services.TryAddSingleton<IRequestDecompressionProvider, DefaultRequestDecompressionProvider>();
./Middleware/RequestDecompression/test/RequestDecompressionMiddlewareTests.cs:189:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/RequestDecompression/test/RequestDecompressionMiddlewareTests.cs:259:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/RequestDecompression/test/RequestDecompressionMiddlewareTests.cs:335:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/RequestDecompression/test/RequestDecompressionMiddlewareTests.cs:430:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/RequestDecompression/test/RequestDecompressionMiddlewareTests.cs:516:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/RequestDecompression/test/RequestDecompressionMiddlewareTests.cs:854:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/ResponseCaching/src/ResponseCachingServicesExtensions.cs:24:        services.TryAddSingleton<ObjectPoolProvider, DefaultObjectPoolProvider>();
./Middleware/ResponseCompression/src/ResponseCompressionServicesExtensions.cs:24:        services.TryAddSingleton<IResponseCompressionProvider, ResponseCompressionProvider>();
./Middleware/ResponseCompression/src/ResponseCompressionServicesExtensions.cs:40:        services.TryAddSingleton<IResponseCompressionProvider, ResponseCompressionProvider>();
./Middleware/ResponseCompression/test/ResponseCompressionMiddlewareTest.cs:449:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/ResponseCompression/test/ResponseCompressionMiddlewareTest.cs:510:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/ResponseCompression/test/ResponseCompressionMiddlewareTest.cs:573:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/ResponseCompression/test/ResponseCompressionMiddlewareTest.cs:1251:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Middleware/Session/test/SessionTests.cs:351:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:409:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:478:                    services.AddSingleton(typeof(ILoggerFactory), NullLoggerFactory.Instance);
./Middleware/Session/test/SessionTests.cs:663:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:664:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:712:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:713:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:761:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:762:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:809:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:810:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:861:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:862:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:924:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:925:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:990:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:991:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:1055:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:1056:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Session/test/SessionTests.cs:1107:                    services.AddSingleton(typeof(ILoggerFactory), loggerFactory);
./Middleware/Session/test/SessionTests.cs:1108:                    services.AddSingleton<IDistributedCache>(new UnreliableCache(new MemoryCache(new MemoryCacheOptions()))
./Middleware/Spa/SpaProxy/src/SpaHostingStartup.cs:27:                services.AddSingleton<SpaProxyLaunchManager>();
./Middleware/Spa/SpaServices.Extensions/src/StaticFiles/SpaStaticFilesExtensions.cs:27:        services.AddSingleton<ISpaStaticFileProvider>(serviceProvider =>
./Middleware/Spa/SpaServices.Extensions/test/SpaServicesExtensionsTests.cs:61:        services.AddSingleton<ILoggerFactory>(ListLoggerFactory);
./Middleware/Spa/SpaServices.Extensions/test/SpaServicesExtensionsTests.cs:62:        services.AddSingleton(typeof(IHostApplicationLifetime), new TestHostApplicationLifetime());
./Middleware/Spa/SpaServices.Extensions/test/SpaServicesExtensionsTests.cs:63:        services.AddSingleton(typeof(IWebHostEnvironment), new TestWebHostEnvironment());
./Middleware/Spa/SpaServices.Extensions/test/SpaServicesExtensionsTests.cs:66:        services.AddSingleton(listener);
./Middleware/Spa/SpaServices.Extensions/test/SpaServicesExtensionsTests.cs:67:        services.AddSingleton<DiagnosticSource>(listener);
./Middleware/StaticFiles/test/FunctionalTests/FallbackStaticFileTest.cs:30:                    services.AddSingleton(LoggerFactory);
./Middleware/StaticFiles/test/FunctionalTests/FallbackStaticFileTest.cs:83:                    services.AddSingleton(LoggerFactory);
./Middleware/StaticFiles/test/FunctionalTests/StaticFileMiddlewareTests.cs:28:                .ConfigureServices(services => services.AddSingleton(LoggerFactory))
./Middleware/StaticFiles/test/FunctionalTests/StaticFileMiddlewareTests.cs:51:                .ConfigureServices(services => { services.AddSingleton(LoggerFactory); services.AddRouting(); })
./Middleware/StaticFiles/test/FunctionalTests/StaticFileMiddlewareTests.cs:97:                .ConfigureServices(services => services.AddSingleton(LoggerFactory))
./Middleware/StaticFiles/test/FunctionalTests/StaticFileMiddlewareTests.cs:142:                .ConfigureServices(services => services.AddSingleton(LoggerFactory))
./Middleware/StaticFiles/test/FunctionalTests/StaticFileMiddlewareTests.cs:184:                .ConfigureServices(services => services.AddSingleton(LoggerFactory))
./Middleware/StaticFiles/test/FunctionalTests/StaticFileMiddlewareTests.cs:246:                .ConfigureServices(services => services.AddSingleton(LoggerFactory))
./Middleware/WebSockets/test/UnitTests/KestrelWebSocketHelpers.cs:61:                    s.AddSingleton(loggerFactory);
./Mvc/Mvc/test/MvcOptionsSetupTest.cs:287:        serviceCollection.AddSingleton(new ApplicationPartManager());
./Mvc/Mvc/test/MvcOptionsSetupTest.cs:289:        serviceCollection.AddSingleton<DiagnosticSource>(diagnosticListener);
./Mvc/Mvc/test/MvcOptionsSetupTest.cs:290:        serviceCollection.AddSingleton<DiagnosticListener>(diagnosticListener);
./Mvc/Mvc/test/MvcOptionsSetupTest.cs:314:        serviceCollection.AddSingleton(hostingEnvironment.Object);
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:47:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:85:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:100:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:116:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:131:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:164:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:179:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:196:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:211:        services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:361:        services.AddSingleton(manager);
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:378:        services.AddSingleton<IWebHostEnvironment>(hostEnvironment);
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:379:        services.AddSingleton<IHostEnvironment>(hostEnvironment);
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:382:        services.AddSingleton<DiagnosticSource>(diagnosticListener);
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:383:        services.AddSingleton<DiagnosticListener>(diagnosticListener);
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:384:        services.AddSingleton<IConfiguration>(new ConfigurationBuilder().Build());
./Mvc/Mvc/test/MvcServiceCollectionExtensionsTest.cs:438:            services.AddSingleton<IWebHostEnvironment>(GetHostingEnvironment());
./Mvc/Mvc.ApiExplorer/src/DependencyInjection/EndpointMethodInfoApiExplorerServiceCollectionExtensions.cs:23:        services.TryAddSingleton<IActionDescriptorCollectionProvider, DefaultActionDescriptorCollectionProvider>();
./Mvc/Mvc.ApiExplorer/src/DependencyInjection/EndpointMethodInfoApiExplorerServiceCollectionExtensions.cs:24:        services.TryAddSingleton<IApiDescriptionGroupCollectionProvider, ApiDescriptionGroupCollectionProvider>();
./Mvc/Mvc.ApiExplorer/src/DependencyInjection/MvcApiExplorerMvcCoreBuilderExtensions.cs:30:        services.TryAddSingleton<IApiDescriptionGroupCollectionProvider, ApiDescriptionGroupCollectionProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreMvcCoreBuilderExtensions.cs:90:        services.TryAddSingleton<FormatFilter, FormatFilter>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:53:        services.TryAddSingleton(partManager);
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:147:        services.TryAddSingleton<ApplicationModelFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:155:        services.TryAddSingleton<IActionDescriptorCollectionProvider, DefaultActionDescriptorCollectionProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:160:        services.TryAddSingleton<IActionSelector, ActionSelector>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:161:        services.TryAddSingleton<ActionConstraintCache>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:173:        services.TryAddSingleton<IControllerFactory, DefaultControllerFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:178:        services.TryAddSingleton<IControllerFactoryProvider, ControllerFactoryProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:179:        services.TryAddSingleton<IControllerActivatorProvider, ControllerActivatorProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:187:        services.TryAddSingleton<IActionInvokerFactory, ActionInvokerFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:192:        services.TryAddSingleton<ControllerActionInvokerCache>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:195:        services.TryAddSingleton<IActionResultTypeMapper, ActionResultTypeMapper>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:208:        services.TryAddSingleton<IModelMetadataProvider, DefaultModelMetadataProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:214:        services.TryAddSingleton<IModelBinderFactory, ModelBinderFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:215:        services.TryAddSingleton<IObjectModelValidator>(s =>
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:221:        services.TryAddSingleton<ClientValidatorCache>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:222:        services.TryAddSingleton<ParameterBinder>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:227:        services.TryAddSingleton<MvcMarkerService, MvcMarkerService>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:228:        services.TryAddSingleton<ITypeActivatorCache, TypeActivatorCache>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:229:        services.TryAddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:230:        services.TryAddSingleton<IHttpRequestStreamReaderFactory, MemoryPoolHttpRequestStreamReaderFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:231:        services.TryAddSingleton<IHttpResponseStreamWriterFactory, MemoryPoolHttpResponseStreamWriterFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:232:        services.TryAddSingleton(ArrayPool<byte>.Shared);
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:233:        services.TryAddSingleton(ArrayPool<char>.Shared);
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:234:        services.TryAddSingleton<OutputFormatterSelector, DefaultOutputFormatterSelector>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:235:        services.TryAddSingleton<IActionResultExecutor<ObjectResult>, ObjectResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:236:        services.TryAddSingleton<IActionResultExecutor<PhysicalFileResult>, PhysicalFileResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:237:        services.TryAddSingleton<IActionResultExecutor<VirtualFileResult>, VirtualFileResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:238:        services.TryAddSingleton<IActionResultExecutor<FileStreamResult>, FileStreamResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:239:        services.TryAddSingleton<IActionResultExecutor<FileContentResult>, FileContentResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:240:        services.TryAddSingleton<IActionResultExecutor<RedirectResult>, RedirectResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:241:        services.TryAddSingleton<IActionResultExecutor<LocalRedirectResult>, LocalRedirectResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:242:        services.TryAddSingleton<IActionResultExecutor<RedirectToActionResult>, RedirectToActionResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:243:        services.TryAddSingleton<IActionResultExecutor<RedirectToRouteResult>, RedirectToRouteResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:244:        services.TryAddSingleton<IActionResultExecutor<RedirectToPageResult>, RedirectToPageResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:245:        services.TryAddSingleton<IActionResultExecutor<ContentResult>, ContentResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:246:        services.TryAddSingleton<IActionResultExecutor<JsonResult>, SystemTextJsonResultExecutor>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:247:        services.TryAddSingleton<IClientErrorFactory, ProblemDetailsClientErrorFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:252:        services.TryAddSingleton<MvcRouteHandler>(); // Only one per app
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:258:        services.TryAddSingleton<ControllerActionEndpointDataSourceFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:259:        services.TryAddSingleton<OrderedEndpointsSequenceProviderCache>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:260:        services.TryAddSingleton<ControllerActionEndpointDataSourceIdProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:261:        services.TryAddSingleton<ActionEndpointFactory>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:262:        services.TryAddSingleton<DynamicControllerEndpointSelectorCache>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:269:        services.TryAddSingleton<MiddlewareFilterConfigurationProvider>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:271:        services.TryAddSingleton<MiddlewareFilterBuilder>();
./Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs:276:        services.TryAddSingleton<ProblemDetailsFactory, DefaultProblemDetailsFactory>();
./Mvc/Mvc.Core/test/AcceptedAtActionResultTests.cs:271:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/AcceptedAtRouteResultTests.cs:179:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/AcceptedResultTests.cs:136:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/ApplicationModels/EndpointMetadataProviderTest.cs:263:        services.AddSingleton(actions);
./Mvc/Mvc.Core/test/Authorization/AuthorizeFilterTest.cs:498:            .AddSingleton(policyProvider)
./Mvc/Mvc.Core/test/Authorization/AuthorizeFilterTest.cs:553:            .AddSingleton<IAuthorizationPolicyProvider>(policyProvider)
./Mvc/Mvc.Core/test/Authorization/AuthorizeFilterTest.cs:604:        serviceCollection.AddSingleton(auth.Object);
./Mvc/Mvc.Core/test/Builder/MvcApplicationBuilderExtensionsTest.cs:39:        services.AddSingleton<DiagnosticListener>(new DiagnosticListener("Microsoft.AspNetCore"));
./Mvc/Mvc.Core/test/Builder/MvcApplicationBuilderExtensionsTest.cs:64:        services.AddSingleton<DiagnosticListener>(new DiagnosticListener("Microsoft.AspNetCore"));
./Mvc/Mvc.Core/test/ChallengeResultTest.cs:27:            .Returns(CreateServices().AddSingleton(auth.Object).BuildServiceProvider());
./Mvc/Mvc.Core/test/ChallengeResultTest.cs:52:            .Returns(CreateServices().AddSingleton(auth.Object).BuildServiceProvider());
./Mvc/Mvc.Core/test/ChallengeResultTest.cs:71:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ContentResultTest.cs:267:        services.AddSingleton<IActionResultExecutor<ContentResult>>(new ContentResultExecutor(
./Mvc/Mvc.Core/test/ContentResultTest.cs:270:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ControllerBaseTest.cs:3142:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/Controllers/ControllerActivatorProviderTest.cs:50:            .AddSingleton(expected)
./Mvc/Mvc.Core/test/Controllers/ControllerBinderDelegateProviderTest.cs:1252:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/CreatedAtActionResultTests.cs:91:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/CreatedAtRouteResultTests.cs:105:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/CreatedResultTests.cs:128:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:114:        services.AddSingleton(manager);
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:133:        services.AddSingleton(mockManager.Object);
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:136:        services.AddSingleton(manager);
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:153:        services.AddSingleton<IWebHostEnvironment>(environment.Object);
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:173:        services.AddSingleton<IWebHostEnvironment>(environment.Object);
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:177:        services.AddSingleton<IWebHostEnvironment>(environment.Object);
./Mvc/Mvc.Core/test/DependencyInjection/MvcCoreServiceCollectionExtensionsTest.cs:199:        services.AddSingleton<IWebHostEnvironment>(environment.Object);
./Mvc/Mvc.Core/test/FileContentResultTest.cs:34:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/FileContentResultTest.cs:35:            .AddSingleton<IActionResultExecutor<FileContentResult>, FileContentResultExecutor>()
./Mvc/Mvc.Core/test/FileResultHelperTest.cs:79:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/FileResultHelperTest.cs:80:            .AddSingleton<EmptyFileResultExecutor>()
./Mvc/Mvc.Core/test/FileResultHelperTest.cs:463:        services.AddSingleton<EmptyFileResultExecutor>();
./Mvc/Mvc.Core/test/FileResultHelperTest.cs:464:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/FileStreamResultTest.cs:25:            .AddSingleton<ILoggerFactory, NullLoggerFactory>()
./Mvc/Mvc.Core/test/FileStreamResultTest.cs:26:            .AddSingleton<IActionResultExecutor<FileStreamResult>, FileStreamResultExecutor>()
./Mvc/Mvc.Core/test/Filters/MiddlewareFilterAttributeTest.cs:17:        services.AddSingleton(new MiddlewareFilterBuilder(new MiddlewareFilterConfigurationProvider()));
./Mvc/Mvc.Core/test/Filters/MiddlewareFilterConfigurationProviderTest.cs:49:        services.AddSingleton(loggerFactory);
./Mvc/Mvc.Core/test/Filters/MiddlewareFilterConfigurationProviderTest.cs:50:        services.AddSingleton(Mock.Of<IWebHostEnvironment>());
./Mvc/Mvc.Core/test/Filters/MiddlewareFilterTest.cs:336:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ForbidResultTest.cs:142:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/ForbidResultTest.cs:143:            .AddSingleton(auth)
./Mvc/Mvc.Core/test/HttpActionResultTests.cs:54:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/HttpNotFoundObjectResultTest.cs:71:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/HttpOkObjectResultTest.cs:73:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/HttpOkResultTest.cs:45:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/HttpStatusCodeResultTests.cs:51:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/Infrastructure/ControllerActionInvokerTest.cs:1615:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/Infrastructure/ControllerActionInvokerTest.cs:1616:        services.AddSingleton<IOptions<MvcOptions>>(options);
./Mvc/Mvc.Core/test/Infrastructure/ControllerActionInvokerTest.cs:1617:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/Infrastructure/DefaultApiProblemDetailsWriterTest.cs:180:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/Infrastructure/JsonResultExecutorTestBase.cs:485:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/Infrastructure/ObjectResultExecutorTest.cs:462:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/LocalRedirectResultTest.cs:139:        serviceCollection.AddSingleton<IActionResultExecutor<LocalRedirectResult>, LocalRedirectResultExecutor>();
./Mvc/Mvc.Core/test/LocalRedirectResultTest.cs:140:        serviceCollection.AddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/test/ModelBinding/Binders/BinderTypeModelBinderTest.cs:36:            .AddSingleton<IModelBinder, NullModelBinder>()
./Mvc/Mvc.Core/test/ModelBinding/Binders/HeaderModelBinderTests.cs:342:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Mvc/Mvc.Core/test/ModelBinding/Binders/HeaderModelBinderTests.cs:343:        services.AddSingleton(Options.Create(options));
./Mvc/Mvc.Core/test/ModelBinding/Binders/ServicesModelBinderTest.cs:40:        services.AddSingleton<IService>(new Service());
./Mvc/Mvc.Core/test/ModelBinding/DefaultModelBindingContextTest.cs:158:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ModelBinding/ModelBinderFactoryTest.cs:642:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ModelBinding/ModelBindingHelperTest.cs:1496:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ModelBinding/ParameterBinderTest.cs:707:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/ModelBinding/TestModelBinderProviderContext.cs:100:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Mvc/Mvc.Core/test/ModelBinding/TestModelBinderProviderContext.cs:103:        services.AddSingleton(Options.Create(mvcOptions));
./Mvc/Mvc.Core/test/ModelBinding/Validation/DefaultObjectValidatorTests.cs:582:        var provider = new ServiceCollection().AddSingleton(service.Object).BuildServiceProvider();
./Mvc/Mvc.Core/test/ObjectResultTests.cs:160:        services.AddSingleton<IActionResultExecutor<ObjectResult>>(new ObjectResultExecutor(
./Mvc/Mvc.Core/test/ObjectResultTests.cs:165:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/PhysicalFileResultTest.cs:59:        services.AddSingleton<IActionResultExecutor<PhysicalFileResult>, TestPhysicalFileResultExecutor>();
./Mvc/Mvc.Core/test/PhysicalFileResultTest.cs:60:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/RedirectResultTest.cs:28:        serviceCollection.AddSingleton<IActionResultExecutor<RedirectResult>, RedirectResultExecutor>();
./Mvc/Mvc.Core/test/RedirectResultTest.cs:29:        serviceCollection.AddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/test/RedirectToActionResultTest.cs:150:        services.AddSingleton<IActionResultExecutor<RedirectToActionResult>, RedirectToActionResultExecutor>();
./Mvc/Mvc.Core/test/RedirectToActionResultTest.cs:151:        services.AddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/test/RedirectToActionResultTest.cs:152:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/RedirectToPageResultTest.cs:295:        services.AddSingleton<IActionResultExecutor<RedirectToPageResult>, RedirectToPageResultExecutor>();
./Mvc/Mvc.Core/test/RedirectToPageResultTest.cs:299:            services.AddSingleton(factory);
./Mvc/Mvc.Core/test/RedirectToPageResultTest.cs:303:            services.AddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/test/RedirectToPageResultTest.cs:306:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/RedirectToRouteResultTest.cs:178:        services.AddSingleton<IActionResultExecutor<RedirectToRouteResult>, RedirectToRouteResultExecutor>();
./Mvc/Mvc.Core/test/RedirectToRouteResultTest.cs:182:            services.AddSingleton(factory);
./Mvc/Mvc.Core/test/RedirectToRouteResultTest.cs:186:            services.AddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/test/RedirectToRouteResultTest.cs:189:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Core/test/RequireHttpsAttributeTests.cs:240:        services.AddSingleton<IOptions<MvcOptions>>(options);
./Mvc/Mvc.Core/test/Routing/ActionEndpointDataSourceBaseTest.cs:138:        services.AddSingleton(actions);
./Mvc/Mvc.Core/test/Routing/AttributeRouteTest.cs:767:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/Routing/AttributeRouteTest.cs:809:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/Routing/AttributeRoutingTest.cs:174:            .AddSingleton<IInlineConstraintResolver>(inlineConstraintResolver);
./Mvc/Mvc.Core/test/Routing/AttributeRoutingTest.cs:180:        return services.AddSingleton(actionDescriptorProvider.Object)
./Mvc/Mvc.Core/test/Routing/AttributeRoutingTest.cs:181:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/Routing/ControllerLinkGeneratorExtensionsTest.cs:219:            .AddSingleton<UrlEncoder>(UrlEncoder.Default);
./Mvc/Mvc.Core/test/Routing/EndpointRoutingUrlHelperTest.cs:288:        services.TryAddSingleton<IUrlHelperFactory, UrlHelperFactory>();
./Mvc/Mvc.Core/test/Routing/KnownRouteValueConstraintTests.cs:31:        services.AddSingleton(descriptorCollectionProvider);
./Mvc/Mvc.Core/test/Routing/PageLinkGeneratorExtensionsTest.cs:189:            .AddSingleton<UrlEncoder>(UrlEncoder.Default);
./Mvc/Mvc.Core/test/Routing/UrlHelperBaseTest.cs:109:            .AddSingleton<UrlEncoder>(UrlEncoder.Default);
./Mvc/Mvc.Core/test/Routing/UrlHelperTestBase.cs:1165:            .AddSingleton<UrlEncoder>(UrlEncoder.Default);
./Mvc/Mvc.Core/test/ServiceFilterAttributeTest.cs:17:            .AddSingleton(expected)
./Mvc/Mvc.Core/test/ServiceFilterAttributeTest.cs:34:            .AddSingleton(new TestFilterFactory())
./Mvc/Mvc.Core/test/SignInResultTest.cs:103:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/SignInResultTest.cs:104:            .AddSingleton(auth)
./Mvc/Mvc.Core/test/SignOutResultTest.cs:168:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Core/test/SignOutResultTest.cs:169:            .AddSingleton(auth)
./Mvc/Mvc.Core/test/TypeFilterAttributeTest.cs:18:            .AddSingleton(value)
./Mvc/Mvc.Core/test/TypeFilterAttributeTest.cs:19:            .AddSingleton(uri)
./Mvc/Mvc.Core/test/TypeFilterAttributeTest.cs:40:            .AddSingleton("Value in DI")
./Mvc/Mvc.Core/test/TypeFilterAttributeTest.cs:41:            .AddSingleton(uri)
./Mvc/Mvc.Core/test/TypeFilterAttributeTest.cs:65:            .AddSingleton("Value in DI")
./Mvc/Mvc.Core/test/TypeFilterAttributeTest.cs:66:            .AddSingleton(uri)
./Mvc/Mvc.Core/test/VirtualFileResultTest.cs:85:            .AddSingleton(webHostEnvironment)
./Mvc/Mvc.Cors/test/CorsAuthorizationFilterTest.cs:145:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.DataAnnotations/src/DependencyInjection/MvcDataAnnotationsMvcCoreBuilderExtensions.cs:63:        services.TryAddSingleton<IValidationAttributeAdapterProvider, ValidationAttributeAdapterProvider>();
./Mvc/Mvc.DataAnnotations/test/DataAnnotationsModelValidatorTest.cs:402:        var provider = new ServiceCollection().AddSingleton(service.Object).BuildServiceProvider();
./Mvc/Mvc.DataAnnotations/test/MvcDataAnnotationsMvcOptionsSetup.cs:19:        services.AddSingleton<IWebHostEnvironment>(Mock.Of<IWebHostEnvironment>());
./Mvc/Mvc.DataAnnotations/test/MvcDataAnnotationsMvcOptionsSetup.cs:20:        services.AddSingleton<IValidationAttributeAdapterProvider, ValidationAttributeAdapterProvider>();
./Mvc/Mvc.DataAnnotations/test/MvcDataAnnotationsMvcOptionsSetup.cs:21:        services.AddSingleton<IOptions<MvcDataAnnotationsLocalizationOptions>>(
./Mvc/Mvc.DataAnnotations/test/MvcDataAnnotationsMvcOptionsSetup.cs:23:        services.AddSingleton<IConfigureOptions<MvcOptions>, MvcDataAnnotationsMvcOptionsSetup>();
./Mvc/Mvc.Formatters.Xml/test/XmlDataContractSerializerOutputFormatterTest.cs:808:            .AddSingleton(Options.Create(new MvcOptions()))
./Mvc/Mvc.Formatters.Xml/test/XmlSerializerOutputFormatterTest.cs:590:            .AddSingleton(Options.Create(new MvcOptions()))
./Mvc/Mvc.Localization/test/MvcLocalizationMvcBuilderExtensionsTest.cs:107:        builder.Services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.Localization/test/MvcLocalizationMvcCoreBuilderExtensionsTest.cs:107:        builder.Services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.NewtonsoftJson/src/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensions.cs:58:        services.TryAddSingleton<ObjectPoolProvider, DefaultObjectPoolProvider>();
./Mvc/Mvc.NewtonsoftJson/src/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensions.cs:72:        services.TryAddSingleton<IActionResultExecutor<JsonResult>, NewtonsoftJsonResultExecutor>();
./Mvc/Mvc.NewtonsoftJson/src/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensions.cs:84:        services.TryAddSingleton<TempDataSerializer, BsonTempDataSerializer>();
./Mvc/Mvc.NewtonsoftJson/src/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensions.cs:97:        services.TryAddSingleton<IJsonHelper, NewtonsoftJsonHelper>();
./Mvc/Mvc.NewtonsoftJson/test/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensionsTest.cs:38:            .AddSingleton<IJsonHelper, SystemTextJsonHelper>();
./Mvc/Mvc.NewtonsoftJson/test/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensionsTest.cs:53:            .AddSingleton<TempDataSerializer, DefaultTempDataSerializer>();
./Mvc/Mvc.NewtonsoftJson/test/DependencyInjection/NewtonsoftJsonMvcCoreBuilderExtensionsTest.cs:68:            .AddSingleton<IActionResultExecutor<JsonResult>, SystemTextJsonResultExecutor>();
./Mvc/Mvc.NewtonsoftJson/test/JsonResultTest.cs:52:        services.AddSingleton<IActionResultExecutor<JsonResult>>(executor);
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcBuilderExtensions.cs:67:        builder.Services.AddSingleton(typeof(ITagHelperInitializer<TTagHelper>), initializer);
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:112:        builder.Services.AddSingleton(typeof(ITagHelperInitializer<TTagHelper>), initializer);
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:122:            services.TryAddSingleton<RazorHotReload>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:131:        services.TryAddSingleton<IRazorViewEngine, RazorViewEngine>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:132:        services.TryAddSingleton<IViewCompilerProvider, DefaultViewCompilerProvider>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:139:        services.TryAddSingleton<IRazorPageActivator, RazorPageActivator>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:142:        services.TryAddSingleton<ITagHelperActivator, DefaultTagHelperActivator>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:143:        services.TryAddSingleton<ITagHelperComponentPropertyActivator, TagHelperComponentPropertyActivator>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:145:        services.TryAddSingleton<ITagHelperFactory, DefaultTagHelperFactory>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:151:        services.TryAddSingleton<IMemoryCache, MemoryCache>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:152:        services.TryAddSingleton<TagHelperMemoryCacheProvider>();
./Mvc/Mvc.Razor/src/DependencyInjection/MvcRazorMvcCoreBuilderExtensions.cs:153:        services.TryAddSingleton<IFileVersionProvider, DefaultFileVersionProvider>();
./Mvc/Mvc.Razor/test/DependencyInjection/MvcRazorMvcCoreBuilderExtensionsTest.cs:42:        services.AddSingleton(hostingEnvironment.Object);
./Mvc/Mvc.Razor/test/RazorHotReloadTest.cs:79:            .AddSingleton<RazorHotReload>()
./Mvc/Mvc.Razor/test/RazorHotReloadTest.cs:80:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.Razor/test/RazorHotReloadTest.cs:81:            .AddSingleton<DiagnosticSource>(diagnosticListener)
./Mvc/Mvc.Razor/test/RazorHotReloadTest.cs:82:            .AddSingleton(diagnosticListener)
./Mvc/Mvc.Razor/test/RazorPageActivatorTest.cs:242:            .AddSingleton(myService)
./Mvc/Mvc.Razor/test/RazorPageActivatorTest.cs:243:            .AddSingleton(htmlHelper)
./Mvc/Mvc.Razor/test/RazorPageCreateModelExpressionTest.cs:316:        serviceCollection.AddSingleton<IModelMetadataProvider>(provider);
./Mvc/Mvc.Razor/test/RazorPageTest.cs:1416:            .AddSingleton<IViewBufferScope>(bufferScope)
./Mvc/Mvc.Razor/test/TagHelpers/TagHelperComponentPropertyActivatorTest.cs:53:            .AddSingleton<ITagHelperComponentPropertyActivator>(new TagHelperComponentPropertyActivator())
./Mvc/Mvc.Razor/test/TagHelpers/TagHelperComponentTagHelperTest.cs:391:            .AddSingleton<ITagHelperComponentPropertyActivator>(new TagHelperComponentPropertyActivator())
./Mvc/Mvc.Razor.RuntimeCompilation/src/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensions.cs:71:        services.TryAddSingleton<IViewCompilerProvider, RuntimeViewCompilerProvider>();
./Mvc/Mvc.Razor.RuntimeCompilation/src/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensions.cs:89:        services.TryAddSingleton<RuntimeCompilationFileProvider>();
./Mvc/Mvc.Razor.RuntimeCompilation/src/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensions.cs:90:        services.TryAddSingleton<RazorReferenceManager>();
./Mvc/Mvc.Razor.RuntimeCompilation/src/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensions.cs:91:        services.TryAddSingleton<CSharpCompiler>();
./Mvc/Mvc.Razor.RuntimeCompilation/src/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensions.cs:93:        services.TryAddSingleton<RazorProjectFileSystem, FileProviderRazorProjectFileSystem>();
./Mvc/Mvc.Razor.RuntimeCompilation/src/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensions.cs:94:        services.TryAddSingleton(s =>
./Mvc/Mvc.Razor.RuntimeCompilation/test/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensionsTest.cs:19:            .AddSingleton<IViewCompilerProvider, DefaultViewCompilerProvider>();
./Mvc/Mvc.Razor.RuntimeCompilation/test/DependencyInjection/RazorRuntimeCompilationMvcCoreBuilderExtensionsTest.cs:34:            .AddSingleton<IActionDescriptorProvider, CompiledPageActionDescriptorProvider>();
./Mvc/Mvc.Razor.RuntimeCompilation/test/PageLoaderMatcherPolicyTest.cs:49:            RequestServices = new ServiceCollection().AddSingleton(loader.Object).BuildServiceProvider(),
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:93:        services.TryAddSingleton<DynamicPageEndpointSelectorCache>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:94:        services.TryAddSingleton<PageActionEndpointDataSourceIdProvider>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:112:        services.TryAddSingleton<PageActionEndpointDataSourceFactory>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:128:        services.TryAddSingleton<IPageApplicationModelPartsProvider, DefaultPageApplicationModelPartsProvider>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:134:        services.TryAddSingleton<PageActionInvokerCache>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:137:        services.TryAddSingleton<IPageModelActivatorProvider, DefaultPageModelActivatorProvider>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:138:        services.TryAddSingleton<IPageModelFactoryProvider, DefaultPageModelFactoryProvider>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:140:        services.TryAddSingleton<IPageActivatorProvider, DefaultPageActivatorProvider>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:141:        services.TryAddSingleton<IPageFactoryProvider, DefaultPageFactoryProvider>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:144:        services.TryAddSingleton<IPageLoader>(s => s.GetRequiredService<PageLoader>());
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:146:        services.TryAddSingleton<PageLoader, DefaultPageLoader>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:147:        services.TryAddSingleton<IPageHandlerMethodSelector, DefaultPageHandlerMethodSelector>();
./Mvc/Mvc.RazorPages/src/DependencyInjection/MvcRazorPagesMvcCoreBuilderExtensions.cs:150:        services.TryAddSingleton<PageResultExecutor>();
./Mvc/Mvc.RazorPages/test/DependencyInjection/MvcRazorPagesMvcBuilderExtensionsTest.cs:19:            .AddSingleton<IConfigureOptions<RazorPagesOptions>, RazorPagesOptionsSetup>();
./Mvc/Mvc.RazorPages/test/DependencyInjection/PageConventionCollectionExtensionsTest.cs:980:            .AddSingleton<IOptions<MvcOptions>>(Options.Options.Create(options))
./Mvc/Mvc.RazorPages/test/Filters/PageSaveTempDataPropertyFilterFactoryTest.cs:35:        serviceCollection.AddSingleton(Mock.Of<ITempDataProvider>());
./Mvc/Mvc.RazorPages/test/Filters/PageSaveTempDataPropertyFilterFactoryTest.cs:36:        serviceCollection.AddSingleton<ITempDataDictionaryFactory, TempDataDictionaryFactory>();
./Mvc/Mvc.RazorPages/test/Infrastructure/DefaultPageFactoryProviderTest.cs:251:            .AddSingleton<ILogger>(NullLogger.Instance)
./Mvc/Mvc.RazorPages/test/Infrastructure/DefaultPageFactoryProviderTest.cs:294:            .AddSingleton<ILogger>(NullLogger.Instance)
./Mvc/Mvc.RazorPages/test/Infrastructure/DefaultPageFactoryProviderTest.cs:332:            .AddSingleton<ILogger>(NullLogger.Instance)
./Mvc/Mvc.RazorPages/test/Infrastructure/DefaultPageModelActivatorProviderTest.cs:41:        serviceCollection.AddSingleton(generator);
./Mvc/Mvc.RazorPages/test/Infrastructure/DefaultPageModelActivatorProviderTest.cs:71:        serviceCollection.AddSingleton(generator);
./Mvc/Mvc.RazorPages/test/Infrastructure/PageActionInvokerTest.cs:1501:        services.AddSingleton<PageResultExecutor, TestPageResultExecutor>();
./Mvc/Mvc.RazorPages/test/Infrastructure/PageBinderFactoryTest.cs:786:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.RazorPages/test/PageModelTest.cs:1776:            .AddSingleton(urlHelperFactory.Object)
./Mvc/Mvc.TagHelpers/src/DependencyInjection/TagHelperExtensions.cs:63:        services.TryAddSingleton<IDistributedCacheTagHelperStorage, DistributedCacheTagHelperStorage>();
./Mvc/Mvc.TagHelpers/src/DependencyInjection/TagHelperExtensions.cs:64:        services.TryAddSingleton<IDistributedCacheTagHelperFormatter, DistributedCacheTagHelperFormatter>();
./Mvc/Mvc.TagHelpers/src/DependencyInjection/TagHelperExtensions.cs:65:        services.TryAddSingleton<IDistributedCacheTagHelperService, DistributedCacheTagHelperService>();
./Mvc/Mvc.TagHelpers/src/DependencyInjection/TagHelperExtensions.cs:69:        services.TryAddSingleton<CacheTagHelperMemoryCacheFactory>();
./Mvc/Mvc.TagHelpers/test/ComponentTagHelperTest.cs:83:                .AddSingleton<IComponentRenderer>(renderer)
./Mvc/Mvc.TagHelpers/test/ComponentTagHelperTest.cs:84:                .AddSingleton<HtmlRenderer>()
./Mvc/Mvc.TagHelpers/test/ComponentTagHelperTest.cs:85:                .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.TagHelpers/test/ComponentTagHelperTest.cs:86:                .AddSingleton<HtmlEncoder>(HtmlEncoder.Default)
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:57:            .AddSingleton(HostingEnvironment)
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:58:            .AddSingleton(MemoryCache)
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:59:            .AddSingleton(CacheProvider)
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:60:            .AddSingleton(HtmlEncoder.Default)
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:61:            .AddSingleton(JavaScriptEncoder.Default)
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:62:            .AddSingleton(Mock.Of<IUrlHelperFactory>())
./Mvc/Mvc.TagHelpers/test/DefaultTagHelperActivatorTest.cs:63:            .AddSingleton(FileVersionProvider)
./Mvc/Mvc.TagHelpers/test/PersistComponentStateTagHelperTest.cs:189:                .AddSingleton(renderer)
./Mvc/Mvc.TagHelpers/test/PersistComponentStateTagHelperTest.cs:190:                .AddSingleton(new ComponentStatePersistenceManager(NullLogger<ComponentStatePersistenceManager>.Instance))
./Mvc/Mvc.TagHelpers/test/PersistComponentStateTagHelperTest.cs:191:                .AddSingleton<HtmlRenderer>()
./Mvc/Mvc.TagHelpers/test/PersistComponentStateTagHelperTest.cs:192:                .AddSingleton(_ephemeralProvider)
./Mvc/Mvc.TagHelpers/test/PersistComponentStateTagHelperTest.cs:193:                .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/Mvc.TagHelpers/test/PersistComponentStateTagHelperTest.cs:194:                .AddSingleton(HtmlEncoder.Default)
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:150:        services.TryAddSingleton<ICompositeViewEngine, CompositeViewEngine>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:151:        services.TryAddSingleton<IActionResultExecutor<ViewResult>, ViewResultExecutor>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:152:        services.TryAddSingleton<IActionResultExecutor<PartialViewResult>, PartialViewResultExecutor>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:164:        services.TryAddSingleton<IHtmlGenerator, DefaultHtmlGenerator>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:165:        services.TryAddSingleton<ModelExpressionProvider>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:167:        services.TryAddSingleton<IModelExpressionProvider>(s => s.GetRequiredService<ModelExpressionProvider>());
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:168:        services.TryAddSingleton<ValidationHtmlAttributeProvider, DefaultValidationHtmlAttributeProvider>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:170:        services.TryAddSingleton<IJsonHelper, SystemTextJsonHelper>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:173:        services.TryAddSingleton<ServerComponentSerializer>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:176:        services.TryAddSingleton<WebAssemblyComponentSerializer>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:183:        services.TryAddSingleton<IViewComponentSelector, DefaultViewComponentSelector>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:184:        services.TryAddSingleton<IViewComponentFactory, DefaultViewComponentFactory>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:185:        services.TryAddSingleton<IViewComponentActivator, DefaultViewComponentActivator>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:186:        services.TryAddSingleton<
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:189:        services.TryAddSingleton<IActionResultExecutor<ViewComponentResult>, ViewComponentResultExecutor>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:191:        services.TryAddSingleton<ViewComponentInvokerCache>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:193:        services.TryAddSingleton<IViewComponentInvokerFactory, DefaultViewComponentInvokerFactory>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:203:        services.TryAddSingleton<SaveTempDataFilter>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:221:        services.TryAddSingleton<ITempDataProvider, CookieTempDataProvider>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:222:        services.TryAddSingleton<TempDataSerializer, DefaultTempDataSerializer>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:227:        services.TryAddSingleton<ValidateAntiforgeryTokenAuthorizationFilter>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:228:        services.TryAddSingleton<AutoValidateAntiforgeryTokenAuthorizationFilter>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:231:        services.TryAddSingleton<ITempDataDictionaryFactory, TempDataDictionaryFactory>();
./Mvc/Mvc.ViewFeatures/src/DependencyInjection/MvcViewFeaturesMvcCoreBuilderExtensions.cs:232:        services.TryAddSingleton(ArrayPool<ViewBufferValue>.Shared);
./Mvc/Mvc.ViewFeatures/test/Filters/ControllerSaveTempDataPropertyFilterFactoryTest.cs:31:        serviceCollection.AddSingleton(Mock.Of<ITempDataProvider>());
./Mvc/Mvc.ViewFeatures/test/Filters/ControllerSaveTempDataPropertyFilterFactoryTest.cs:32:        serviceCollection.AddSingleton<ITempDataDictionaryFactory, TempDataDictionaryFactory>();
./Mvc/Mvc.ViewFeatures/test/PageRemoteAttributeTest.cs:162:        serviceCollection.AddSingleton<IUrlHelperFactory>(factory.Object);
./Mvc/Mvc.ViewFeatures/test/PageRemoteAttributeTest.cs:187:            .AddSingleton<ILoggerFactory>(new NullLoggerFactory());
./Mvc/Mvc.ViewFeatures/test/PageRemoteAttributeTest.cs:192:        serviceCollection.AddSingleton<IInlineConstraintResolver>(
./Mvc/Mvc.ViewFeatures/test/PartialViewResultTest.cs:245:        services.AddSingleton<IActionResultExecutor<PartialViewResult>>(viewExecutor);
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:650:        collection.TryAddSingleton(HtmlEncoder.Default);
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:651:        collection.TryAddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:652:        collection.TryAddSingleton<ServerComponentSerializer>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:653:        collection.TryAddSingleton(_dataprotectorProvider);
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:654:        collection.TryAddSingleton<WebAssemblyComponentSerializer>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:879:        services.AddSingleton(_dataprotectorProvider);
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:880:        services.AddSingleton<IJSRuntime, UnsupportedJavaScriptRuntime>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:881:        services.AddSingleton<NavigationManager, HttpNavigationManager>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:882:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:883:        services.AddSingleton<ILogger<ComponentStatePersistenceManager>, NullLogger<ComponentStatePersistenceManager>>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:884:        services.AddSingleton<ComponentStatePersistenceManager>();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/ComponentRendererTest.cs:885:        services.AddSingleton(sp => sp.GetRequiredService<ComponentStatePersistenceManager>().State);
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:24:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:43:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:63:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:83:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:103:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:132:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:159:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:181:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:202:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:223:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:250:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:283:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:324:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:346:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:368:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:389:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:410:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:431:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:451:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:478:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:513:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:542:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:582:            .AddSingleton(new Func<ParameterView, RenderFragment>(Content))
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:606:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:634:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:705:        var serviceProvider = new ServiceCollection().AddSingleton<AsyncComponent>().BuildServiceProvider();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:729:        var serviceProvider = new ServiceCollection().AddSingleton<AsyncComponent>().BuildServiceProvider();
./Mvc/Mvc.ViewFeatures/test/RazorComponents/HtmlRendererTest.cs:748:        var serviceProvider = new ServiceCollection().AddSingleton(new RenderFragment(rtb =>
./Mvc/Mvc.ViewFeatures/test/RemoteAttributeBaseTest.cs:487:            serviceCollection.AddSingleton<IStringLocalizerFactory>(localizerFactory);
./Mvc/Mvc.ViewFeatures/test/RemoteAttributeTest.cs:365:        serviceCollection.AddSingleton<IUrlHelperFactory>(factory.Object);
./Mvc/Mvc.ViewFeatures/test/RemoteAttributeTest.cs:417:        serviceCollection.AddSingleton<IUrlHelperFactory>(factory.Object);
./Mvc/Mvc.ViewFeatures/test/RemoteAttributeTest.cs:488:            .AddSingleton<ILoggerFactory>(new NullLoggerFactory());
./Mvc/Mvc.ViewFeatures/test/RemoteAttributeTest.cs:493:        serviceCollection.AddSingleton<IInlineConstraintResolver>(
./Mvc/Mvc.ViewFeatures/test/Rendering/DefaultTemplatesUtilities.cs:270:           .AddSingleton(viewEngine)
./Mvc/Mvc.ViewFeatures/test/Rendering/DefaultTemplatesUtilities.cs:271:           .AddSingleton(urlHelperFactory.Object)
./Mvc/Mvc.ViewFeatures/test/Rendering/DefaultTemplatesUtilities.cs:272:           .AddSingleton(Mock.Of<IViewComponentHelper>())
./Mvc/Mvc.ViewFeatures/test/Rendering/DefaultTemplatesUtilities.cs:273:           .AddSingleton(innerHelper)
./Mvc/Mvc.ViewFeatures/test/Rendering/DefaultTemplatesUtilities.cs:274:           .AddSingleton<IViewBufferScope, TestViewBufferScope>()
./Mvc/Mvc.ViewFeatures/test/Rendering/HtmlHelperComponentExtensionsTest.cs:37:            RequestServices = new ServiceCollection().AddSingleton<IComponentRenderer>(renderer).BuildServiceProvider(),
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:153:        services.AddSingleton<IViewComponentSelector>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:414:        services.AddSingleton<IViewComponentHelper>(helper);
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:456:        services.AddSingleton<IViewComponentHelper>(helper);
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:662:        services.AddSingleton<DiagnosticListener>(diagnosticSource);
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:663:        services.AddSingleton<ViewComponentInvokerCache>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:664:        services.AddSingleton(Options.Create(new MvcViewOptions()));
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:666:        services.AddSingleton<IViewComponentSelector, DefaultViewComponentSelector>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:667:        services.AddSingleton<IViewComponentDescriptorCollectionProvider, DefaultViewComponentDescriptorCollectionProvider>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:668:        services.AddSingleton<IViewComponentInvokerFactory, DefaultViewComponentInvokerFactory>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:669:        services.AddSingleton<ITypeActivatorCache, TypeActivatorCache>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:670:        services.AddSingleton<IViewComponentActivator, DefaultViewComponentActivator>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:671:        services.AddSingleton<IViewComponentFactory, DefaultViewComponentFactory>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:672:        services.AddSingleton<IViewComponentDescriptorProvider>(new FixedSetViewComponentDescriptorProvider(descriptors));
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:673:        services.AddSingleton<IModelMetadataProvider, EmptyModelMetadataProvider>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:674:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:675:        services.AddSingleton<ITempDataDictionaryFactory, TempDataDictionaryFactory>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:676:        services.AddSingleton<ITempDataProvider, SessionStateTempDataProvider>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:677:        services.AddSingleton<TempDataSerializer, DefaultTempDataSerializer>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:678:        services.AddSingleton<HtmlEncoder, HtmlTestEncoder>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:679:        services.AddSingleton<IViewBufferScope, TestViewBufferScope>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:680:        services.AddSingleton<IActionResultExecutor<ViewComponentResult>, ViewComponentResultExecutor>();
./Mvc/Mvc.ViewFeatures/test/ViewComponentResultTest.cs:681:        services.AddSingleton<IHttpResponseStreamWriterFactory, TestHttpResponseStreamWriterFactory>();
./Mvc/Mvc.ViewFeatures/test/ViewExecutorTest.cs:163:        serviceCollection.AddSingleton<IModelMetadataProvider>(new EmptyModelMetadataProvider());
./Mvc/Mvc.ViewFeatures/test/ViewExecutorTest.cs:165:        serviceCollection.AddSingleton<ITempDataDictionary>(new TempDataDictionary(httpContext, tempDataProvider));
./Mvc/Mvc.ViewFeatures/test/ViewResultTest.cs:257:        services.AddSingleton<IActionResultExecutor<ViewResult>>(viewExecutor);
./Mvc/perf/benchmarkapps/BasicApi/Startup.cs:41:            services.AddSingleton(new SigningCredentials(
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/PreserveComponentStateBenchmark.cs:42:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/RuntimePerformanceBenchmarkBase.cs:126:            .AddSingleton<ILoggerFactory, NullLoggerFactory>()
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/RuntimePerformanceBenchmarkBase.cs:127:            .AddSingleton<ObjectPoolProvider, DefaultObjectPoolProvider>()
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/RuntimePerformanceBenchmarkBase.cs:128:            .AddSingleton<DiagnosticSource>(listener)
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/RuntimePerformanceBenchmarkBase.cs:129:            .AddSingleton(listener)
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/RuntimePerformanceBenchmarkBase.cs:130:            .AddSingleton<IWebHostEnvironment, BenchmarkHostingEnvironment>()
./Mvc/perf/Microbenchmarks/Microsoft.AspNetCore.Mvc/RuntimePerformanceBenchmarkBase.cs:131:            .AddSingleton<ApplicationPartManager>(partManager)
./Mvc/shared/Mvc.Core.TestCommon/TestModelBinderFactory.cs:83:        services.AddSingleton<ILoggerFactory, NullLoggerFactory>();
./Mvc/shared/Mvc.Core.TestCommon/TestModelBinderFactory.cs:84:        services.AddSingleton(options);
./Mvc/test/Mvc.FunctionalTests/AsyncDisposalTest.cs:23:        .ConfigureServices(s => s.AddSingleton<ControllerTestDisposeAsync>());
./Mvc/test/Mvc.FunctionalTests/ComponentRenderingFunctionalTests.cs:194:            services.AddSingleton(new WeatherForecastService(new HttpClient(loopHandler)
./Mvc/test/Mvc.FunctionalTests/ErrorPageTests.cs:40:            .WithWebHostBuilder(builder => builder.ConfigureLogging(l => l.Services.AddSingleton<ILoggerFactory>(loggerProvider)))
./Mvc/test/Mvc.FunctionalTests/HtmlGenerationWithCultureTest.cs:134:                .ConfigureTestServices(services => services.AddSingleton(LoggerFactory)))
./Mvc/test/Mvc.FunctionalTests/Infrastructure/MvcTestFixture.cs:28:                    services.AddSingleton<ILoggerFactory>(loggerFactory);
./Mvc/test/Mvc.FunctionalTests/Infrastructure/MvcTestFixture.cs:29:                    services.AddSingleton<TestSink>(testSink);
./Mvc/test/Mvc.FunctionalTests/Infrastructure/MvcWebApplicationBuilderExtensions.cs:29:            services.TryAddSingleton(new TestCulture
./Mvc/test/Mvc.FunctionalTests/PageAsyncDisposalTest.cs:23:        .ConfigureServices(s => s.AddSingleton<RazorPagesWebSite.PageTestDisposeAsync>());
./Mvc/test/Mvc.FunctionalTests/TestingInfrastructureTests.cs:28:        builder.ConfigureTestServices(s => s.AddSingleton<TestService, OverridenService>());
./Mvc/test/Mvc.FunctionalTests/TestingInfrastructureTests.cs:173:                builder.ConfigureTestServices(s => s.AddSingleton<GenericHostWebSite.TestGenericService, OverridenGenericService>()));
./Mvc/test/Mvc.IntegrationTests/AuthorizeFilterIntegrationTest.cs:182:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/test/Mvc.IntegrationTests/ModelBindingTestHelper.cs:168:        serviceCollection.AddSingleton(new ApplicationPartManager());
./Mvc/test/Mvc.IntegrationTests/ModelBindingTestHelper.cs:171:            serviceCollection.AddSingleton(metadataProvider);
./Mvc/test/Mvc.IntegrationTests/ModelBindingTestHelper.cs:175:            serviceCollection.AddSingleton(services =>
./Mvc/test/Mvc.IntegrationTests/ModelBindingTestHelper.cs:183:            serviceCollection.AddSingleton<IModelMetadataProvider>(services =>
./Mvc/test/Mvc.IntegrationTests/ModelBindingTestHelper.cs:191:            serviceCollection.AddSingleton(Options.Create(mvcOptions));
./Mvc/test/Mvc.IntegrationTests/ModelBindingTestHelper.cs:197:            .AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance)
./Mvc/test/WebSites/ApiExplorerWebSite/Startup.cs:34:        services.AddSingleton<ApiExplorerDataFilter>();
./Mvc/test/WebSites/ApiExplorerWebSite/Startup.cs:35:        services.AddSingleton<IActionDescriptorChangeProvider, ActionDescriptorChangeProvider>();
./Mvc/test/WebSites/ApiExplorerWebSite/Startup.cs:36:        services.AddSingleton(wellKnownChangeToken);
./Mvc/test/WebSites/BasicWebSite/Startup.cs:23:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/BasicWebSite/StartupWithCustomInvalidModelStateFactory.cs:36:        services.AddSingleton<ContactsRepository>();
./Mvc/test/WebSites/BasicWebSite/StartupWithoutEndpointRouting.cs:20:        services.AddSingleton(new TestService { Message = "true" });
./Mvc/test/WebSites/BasicWebSite/StartupWithoutEndpointRouting.cs:43:        services.AddSingleton<IActionDescriptorProvider, ActionDescriptorCreationCounter>();
./Mvc/test/WebSites/BasicWebSite/StartupWithoutEndpointRouting.cs:45:        services.AddSingleton<ContactsRepository>();
./Mvc/test/WebSites/BasicWebSite/StartupWithoutEndpointRouting.cs:49:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/BasicWebSite/StartupWithoutEndpointRouting.cs:50:        services.TryAddSingleton(CreateWeatherForecastService);
./Mvc/test/WebSites/BasicWebSite/StartupWithSystemTextJson.cs:13:        services.AddSingleton<ContactsRepository>();
./Mvc/test/WebSites/GenericHostWebSite/Startup.cs:14:        services.AddSingleton(new TestGenericService { Message = "true" });
./Mvc/test/WebSites/GenericHostWebSite/Startup.cs:26:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/HtmlGenerationWebSite/Startup.cs:20:        services.AddSingleton(typeof(ISignalTokenProviderService<>), typeof(SignalTokenProviderService<>));
./Mvc/test/WebSites/HtmlGenerationWebSite/Startup.cs:21:        services.AddSingleton<ProductsService>();
./Mvc/test/WebSites/RazorBuildWebSite/Startup.cs:11:        services.AddSingleton(fileProvider);
./Mvc/test/WebSites/RazorBuildWebSite/StartupWithHostingStartup.cs:19:        services.AddSingleton(fileProvider);
./Mvc/test/WebSites/RazorWebSite/Startup.cs:15:        services.AddSingleton<ITagHelperComponent, TestHeadTagHelperComponent>();
./Mvc/test/WebSites/RazorWebSite/Startup.cs:16:        services.AddSingleton<ITagHelperComponent, TestBodyTagHelperComponent>();
./Mvc/test/WebSites/RoutingWebSite/Startup.cs:32:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupForDynamic.cs:21:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupForDynamicOrder.cs:36:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupForEndpointFilters.cs:20:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupForFallback.cs:19:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupForGroups.cs:20:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupForLinkGenerator.cs:34:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupRoutingDifferentBranches.cs:34:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./Mvc/test/WebSites/RoutingWebSite/StartupRoutingDifferentBranches.cs:35:        services.AddSingleton<BranchesTransformer>();
./Mvc/test/WebSites/VersioningWebSite/Startup.cs:17:        services.AddSingleton<IActionContextAccessor, ActionContextAccessor>();
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:22:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:23:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:45:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:46:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:68:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:69:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:96:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:97:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:125:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:126:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:157:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:158:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:187:            .AddSingleton<IServiceProviderIsService>(serviceProviderIsService)
./OpenApi/test/OpenApiRouteHandlerBuilderExtensionTests.cs:188:            .AddSingleton<IHostEnvironment>(hostEnvironment)
./ProjectTemplates/Web.ProjectTemplates/content/BlazorServerWeb-CSharp/Program.cs:119:builder.Services.AddSingleton<WeatherForecastService>();
./ProjectTemplates/Web.ProjectTemplates/content/BlazorServerWeb-CSharp/Program.Main.cs:125:        builder.Services.AddSingleton<WeatherForecastService>();
./Security/Authentication/Certificate/src/CertificateAuthenticationExtensions.cs:90:        builder.Services.AddSingleton<ICertificateValidationCache, CertificateValidationCache>();
./Security/Authentication/Cookies/samples/CookieSessionSample/Startup.cs:21:        services.AddSingleton<ITicketStore, MemoryCacheTicketStore>();
./Security/Authentication/Core/src/AuthenticationServiceCollectionExtensions.cs:26:        services.TryAddSingleton<ISystemClock, SystemClock>();
./Security/Authentication/Core/src/AuthenticationServiceCollectionExtensions.cs:27:        services.TryAddSingleton<IAuthenticationConfigurationProvider, DefaultAuthenticationConfigurationProvider>();
./Security/Authentication/Negotiate/test/Negotiate.Test/ServerDeferralTests.cs:52:                    services.AddSingleton<IServerIntegratedAuth>(new ServerIntegratedAuth()
./Security/Authentication/test/AuthenticationMiddlewareTests.cs:209:        serviceCollection.AddSingleton(authenticationService);
./Security/Authentication/test/AuthenticationMiddlewareTests.cs:213:        serviceCollection.AddSingleton<IConfiguration>(new ConfigurationManager());
./Security/Authentication/test/CertificateTests.cs:868:                            services.AddSingleton<ICertificateValidationCache>(new CertificateValidationCache(Options.Create(new CertificateValidationCacheOptions()), clock));
./Security/Authentication/test/CertificateTests.cs:886:                        services.AddSingleton(clock);
./Security/Authentication/test/CookieTests.cs:190:            s.AddSingleton<ISystemClock>(_clock);
./Security/Authentication/test/CookieTests.cs:225:            s.AddSingleton<ISystemClock>(_clock);
./Security/Authentication/test/CookieTests.cs:1795:            s.AddSingleton<ISystemClock>(_clock);
./Security/Authentication/test/CookieTests.cs:1799:                s.AddSingleton<IClaimsTransformation, ClaimsTransformer>();
./Security/Authentication/test/JwtBearerTests.cs:902:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/JwtBearerTests.cs:940:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:44:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:89:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:91:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:118:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:120:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:158:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:160:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:198:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:200:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:238:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:240:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:279:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:281:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:283:        services.AddSingleton(selector);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:334:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:336:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:338:        services.AddSingleton(selector);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:394:        services.AddSingleton(specific);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:396:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectConfigurationTests.cs:398:        services.AddSingleton(selector);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectTests.cs:431:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectTests.cs:464:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectTests.cs:499:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectTests.cs:522:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/OpenIdConnect/OpenIdConnectTests.cs:547:        services.AddSingleton<IConfiguration>(config);
./Security/Authentication/test/PolicyTests.cs:70:        services.AddSingleton(handler1);
./Security/Authentication/test/PolicyTests.cs:72:        services.AddSingleton(handler2);
./Security/Authentication/test/PolicyTests.cs:126:        services.AddSingleton(handler1);
./Security/Authentication/test/PolicyTests.cs:128:        services.AddSingleton(handler2);
./Security/Authentication/test/PolicyTests.cs:187:        services.AddSingleton(handler1);
./Security/Authentication/test/PolicyTests.cs:189:        services.AddSingleton(handler2);
./Security/Authentication/test/PolicyTests.cs:239:        services.AddSingleton(handler1);
./Security/Authentication/test/PolicyTests.cs:241:        services.AddSingleton(handler2);
./Security/Authentication/test/PolicyTests.cs:296:        services.AddSingleton(handler1);
./Security/Authentication/test/PolicyTests.cs:298:        services.AddSingleton(handler2);
./Security/Authentication/test/RemoteAuthenticationTests.cs:22:            s.AddSingleton<IConfiguration>(new ConfigurationManager());
./Security/Authentication/test/RemoteAuthenticationTests.cs:28:            s.AddSingleton<ISystemClock>(Clock);
./Security/Authentication/test/SharedAuthenticationTests.cs:38:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:100:            services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:102:            services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:142:            services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:144:            services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:182:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:184:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:219:        var builder = services.AddSingleton<IClaimsTransformation>(transform).AddAuthentication(o =>
./Security/Authentication/test/SharedAuthenticationTests.cs:232:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:234:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:261:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:263:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:300:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:302:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:340:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:342:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:344:        services.AddSingleton(selector);
./Security/Authentication/test/SharedAuthenticationTests.cs:409:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:411:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:413:        services.AddSingleton(selector);
./Security/Authentication/test/SharedAuthenticationTests.cs:483:        services.AddSingleton(specific);
./Security/Authentication/test/SharedAuthenticationTests.cs:485:        services.AddSingleton(forwardDefault);
./Security/Authentication/test/SharedAuthenticationTests.cs:487:        services.AddSingleton(selector);
./Security/Authentication/test/WsFederation/WsFederationTest.cs:29:        services.AddSingleton<IConfiguration>(new ConfigurationManager());
./Security/Authentication/test/WsFederation/WsFederationTest.cs:207:                        services.AddSingleton<MyWsFedEvents>();
./Security/Authorization/Policy/src/PolicyServiceCollectionExtensions.cs:32:        services.TryAddSingleton<AuthorizationPolicyMarkerService>();
./Security/Authorization/Policy/src/PolicyServiceCollectionExtensions.cs:49:        services.TryAddSingleton<AuthorizationPolicyCache>();
./Security/Authorization/Policy/src/PolicyServiceCollectionExtensions.cs:65:        services.TryAddSingleton<AuthorizationPolicyCache>();
./Security/Authorization/test/AuthorizationAppBuilderExtensionsTests.cs:70:        services.AddSingleton(authenticationService);
./Security/Authorization/test/AuthorizationMiddlewareTests.cs:253:            .AddSingleton(CreateDataSource(endpoint)).BuildServiceProvider();
./Security/Authorization/test/AuthorizationMiddlewareTests.cs:312:            .AddSingleton(CreateDataSource(endpoint)).BuildServiceProvider();
./Security/Authorization/test/AuthorizationMiddlewareTests.cs:987:        serviceCollection.AddSingleton(authenticationService);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:101:            services.AddSingleton<IAuthorizationHandler>(handler1);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:102:            services.AddSingleton<IAuthorizationHandler>(handler2);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:126:            services.AddSingleton<IAuthorizationHandler>(handler1);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:127:            services.AddSingleton<IAuthorizationHandler>(handler2);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:178:            services.AddSingleton<IAuthorizationHandler>(handler1);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:179:            services.AddSingleton<IAuthorizationHandler>(handler2);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:180:            services.AddSingleton<IAuthorizationHandler>(handler3);
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:845:            services.AddSingleton<IAuthorizationHandler>(new ExpenseReportAuthorizationHandler(new OperationAuthorizationRequirement[] { Operations.Edit }));
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:931:            services.AddSingleton<IAuthorizationHandler>(new ExpenseReportAuthorizationHandler(new OperationAuthorizationRequirement[] { Operations.Edit }));
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:948:            services.AddSingleton<IAuthorizationHandler>(new ExpenseReportAuthorizationHandler(new OperationAuthorizationRequirement[] { Operations.Edit }));
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1019:            services.AddSingleton<IAuthorizationPolicyProvider, StaticPolicyProvider>();
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1058:            services.AddSingleton<IAuthorizationPolicyProvider, DynamicPolicyProvider>();
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1084:            services.AddSingleton<IAuthorizationEvaluator, SuccessEvaluator>();
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1125:            services.AddSingleton<IAuthorizationHandlerContextFactory, BadContextMaker>();
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1144:            services.AddSingleton<IAuthorizationHandlerProvider, SadHandlerProvider>();
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1200:            services.AddSingleton<ILogger<DefaultAuthorizationService>>(new DefaultAuthorizationServiceTestLogger(Assertion));
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1233:            services.AddSingleton<IAuthorizationHandler, FailHandler>();
./Security/Authorization/test/DefaultAuthorizationServiceTests.cs:1234:            services.AddSingleton<ILogger<DefaultAuthorizationService>>(new DefaultAuthorizationServiceTestLogger(Assertion));
./Security/Authorization/test/PassThroughAuthorizationHandlerTests.cs:37:            services.AddSingleton<IAuthorizationHandler>(afterHandler);
./Security/Authorization/test/PolicyEvaluatorTests.cs:19:        var services = new ServiceCollection().AddSingleton<IAuthenticationService, SadAuthentication>();
./Security/Authorization/test/PolicyEvaluatorTests.cs:36:        var services = new ServiceCollection().AddSingleton<IAuthenticationService, EchoAuthentication>();
./Security/Authorization/test/PolicyEvaluatorTests.cs:55:        var services = new ServiceCollection().AddSingleton<IAuthenticationService>(auth);
./Security/samples/Cookies/Startup.cs:44:        services.AddSingleton<IConfigureOptions<CookieAuthenticationOptions>, ConfigureMyCookie>();
./Security/samples/CustomPolicyProvider/Startup.cs:20:        services.AddSingleton<IAuthorizationPolicyProvider, MinimumAgePolicyProvider>();
./Security/samples/CustomPolicyProvider/Startup.cs:23:        services.AddSingleton<IAuthorizationHandler, MinimumAgeAuthorizationHandler>();
./Security/samples/Identity.ExternalClaims/Startup.cs:70:        services.AddSingleton<IEmailSender, EmailSender>();
./Servers/HttpSys/src/WebHostBuilderHttpSysExtensions.cs:31:            services.AddSingleton<MessagePump>();
./Servers/HttpSys/src/WebHostBuilderHttpSysExtensions.cs:32:            services.AddSingleton<IServer>(services => services.GetRequiredService<MessagePump>());
./Servers/HttpSys/src/WebHostBuilderHttpSysExtensions.cs:35:                services.AddSingleton<IServerDelegationFeature>(services => services.GetRequiredService<MessagePump>());
./Servers/HttpSys/src/WebHostBuilderHttpSysExtensions.cs:38:            services.AddSingleton<IServerIntegratedAuth>(services =>
./Servers/IIS/IIS/src/WebHostBuilderIISExtensions.cs:37:                    services.AddSingleton(new IISNativeApplication(new NativeSafeHandle(iisConfigData.pNativeApplication)));
./Servers/IIS/IIS/src/WebHostBuilderIISExtensions.cs:38:                    services.AddSingleton<IServer, IISHttpServer>();
./Servers/IIS/IIS/src/WebHostBuilderIISExtensions.cs:40:                    services.AddSingleton<IStartupFilter, IISServerSetupFilter>();
./Servers/IIS/IIS/src/WebHostBuilderIISExtensions.cs:42:                    services.AddSingleton<IServerIntegratedAuth>(_ => new ServerIntegratedAuth()
./Servers/IIS/IIS/test/IIS.Tests/Utilities/TestServer.cs:149:                        services.AddSingleton(_loggerFactory);
./Servers/IIS/IIS/test/testassets/InProcessWebSite/Program.cs:99:                            .ConfigureServices(services => services.AddSingleton<IServer, DummyServer>())
./Servers/IIS/IISIntegration/src/WebHostBuilderIISExtensions.cs:86:                services.AddSingleton<IServerIntegratedAuth>(_ => new ServerIntegratedAuth()
./Servers/IIS/IISIntegration/src/WebHostBuilderIISExtensions.cs:91:                services.AddSingleton<IStartupFilter>(new IISSetupFilter(pairingToken, new PathString(path), isWebSocketsSupported));
./Servers/Kestrel/Core/test/KestrelServerOptionsTests.cs:84:        serviceCollection.AddSingleton(Mock.Of<IHostEnvironment>());
./Servers/Kestrel/Core/test/KestrelServerOptionsTests.cs:85:        serviceCollection.AddSingleton(Mock.Of<ILogger<KestrelServer>>());
./Servers/Kestrel/Core/test/KestrelServerOptionsTests.cs:86:        serviceCollection.AddSingleton(Mock.Of<ILogger<HttpsConnectionMiddleware>>());
./Servers/Kestrel/Core/test/KestrelServerTests.cs:768:        serviceCollection.AddSingleton(Mock.Of<IHostEnvironment>());
./Servers/Kestrel/Core/test/KestrelServerTests.cs:769:        serviceCollection.AddSingleton(Mock.Of<ILogger<KestrelServer>>());
./Servers/Kestrel/Core/test/KestrelServerTests.cs:770:        serviceCollection.AddSingleton(Mock.Of<ILogger<HttpsConnectionMiddleware>>());
./Servers/Kestrel/Core/test/KestrelServerTests.cs:905:        serviceCollection.AddSingleton(Mock.Of<IHostEnvironment>());
./Servers/Kestrel/Core/test/KestrelServerTests.cs:906:        serviceCollection.AddSingleton(Mock.Of<ILogger<KestrelServer>>());
./Servers/Kestrel/Core/test/KestrelServerTests.cs:907:        serviceCollection.AddSingleton(Mock.Of<ILogger<HttpsConnectionMiddleware>>());
./Servers/Kestrel/Kestrel/src/WebHostBuilderKestrelExtensions.cs:66:            services.TryAddSingleton<IConnectionListenerFactory, SocketTransportFactory>();
./Servers/Kestrel/Kestrel/src/WebHostBuilderKestrelExtensions.cs:69:            services.AddSingleton<IServer, KestrelServerImpl>(); // TODO (acasey)
./Servers/Kestrel/Kestrel/test/KestrelConfigurationLoaderTests.cs:26:            .AddSingleton<IHostEnvironment>(env)
./Servers/Kestrel/perf/Microbenchmarks/InMemoryTransportBenchmark.cs:56:            .ConfigureServices(services => services.AddSingleton<IConnectionListenerFactory>(transportFactory))
./Servers/Kestrel/shared/test/TransportTestHelpers/TestServer.cs:85:                        services.AddSingleton<IStartup>(this);
./Servers/Kestrel/shared/test/TransportTestHelpers/TestServer.cs:86:                        services.AddSingleton(context.LoggerFactory);
./Servers/Kestrel/shared/test/TransportTestHelpers/TestServer.cs:87:                        services.AddSingleton<IServer>(sp =>
./Servers/Kestrel/shared/test/TransportTestHelpers/TestServer.cs:132:        services.AddSingleton<IHostApplicationLifetime, LifetimeNotImplemented>();
./Servers/Kestrel/test/InMemory.FunctionalTests/HttpsTests.cs:435:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(multiplexedConnectionListenerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/HttpsTests.cs:479:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(multiplexedConnectionListenerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/HttpsTests.cs:519:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(multiplexedConnectionListenerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/HttpsTests.cs:555:                    services.AddSingleton<IMultiplexedConnectionListenerFactory>(multiplexedConnectionListenerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/HttpsTests.cs:594:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(multiplexedConnectionListenerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/HttpsTests.cs:644:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(multiplexedConnectionListenerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/ResponseTests.cs:4378:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(new MockMultiplexedConnectionListenerFactory());
./Servers/Kestrel/test/InMemory.FunctionalTests/ResponseTests.cs:4477:                services.AddSingleton<IMultiplexedConnectionListenerFactory>(new MockMultiplexedConnectionListenerFactory());
./Servers/Kestrel/test/InMemory.FunctionalTests/ResponseTests.cs:4551:            services => services.AddSingleton(mockHttpContextFactory.Object)))
./Servers/Kestrel/test/InMemory.FunctionalTests/TestTransport/TestServer.cs:87:                services.AddSingleton<IStartup>(this);
./Servers/Kestrel/test/InMemory.FunctionalTests/TestTransport/TestServer.cs:88:                services.AddSingleton(context.LoggerFactory);
./Servers/Kestrel/test/InMemory.FunctionalTests/TestTransport/TestServer.cs:90:                services.AddSingleton<IServer>(sp =>
./Servers/Kestrel/Transport.NamedPipes/src/WebHostBuilderNamedPipeExtensions.cs:34:            services.TryAddSingleton<ObjectPoolProvider, DefaultObjectPoolProvider>();
./Servers/Kestrel/Transport.NamedPipes/src/WebHostBuilderNamedPipeExtensions.cs:35:            services.AddSingleton<IConnectionListenerFactory, NamedPipeTransportFactory>();
./Servers/Kestrel/Transport.NamedPipes/test/WebHostTests.cs:81:                     services.AddSingleton<IConnectionListenerFactory>(transport);
./Servers/Kestrel/Transport.Quic/src/WebHostBuilderQuicExtensions.cs:27:                services.AddSingleton<IMultiplexedConnectionListenerFactory, QuicTransportFactory>();
./Servers/Kestrel/Transport.Sockets/src/WebHostBuilderSocketExtensions.cs:28:            services.AddSingleton<IConnectionListenerFactory, SocketTransportFactory>();
./Servers/testassets/ServerComparison.TestSites/StartupNtlmAuthentication.cs:20:        // services.AddSingleton<IClaimsTransformation, OneTransformPerRequest>();
./Shared/Http2cat/Http2CatIServiceCollectionExtensions.cs:15:        services.AddSingleton<IConnectionFactory, SocketConnectionFactory>();
./Shared/ResultsTests/FileContentResultTestBase.cs:356:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Shared/ResultsTests/FileStreamResultTestBase.cs:444:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Shared/ResultsTests/FileStreamResultTestBase.cs:445:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Shared/ResultsTests/PhysicalFileResultTestBase.cs:461:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Shared/ResultsTests/PhysicalFileResultTestBase.cs:462:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./Shared/ResultsTests/VirtualFileResultTestBase.cs:491:        services.AddSingleton<IWebHostEnvironment>(hostingEnvironment);
./Shared/ResultsTests/VirtualFileResultTestBase.cs:492:        services.AddSingleton<ILoggerFactory>(NullLoggerFactory.Instance);
./Shared/ResultsTests/VirtualFileResultTestBase.cs:493:        services.AddSingleton(typeof(ILogger<>), typeof(NullLogger<>));
./SignalR/clients/csharp/Client/src/HubConnectionBuilderHttpExtensions.cs:146:        hubConnectionBuilder.Services.AddSingleton<EndPoint, HttpConnectionOptionsDerivedHttpEndPoint>();
./SignalR/clients/csharp/Client/src/HubConnectionBuilderHttpExtensions.cs:149:        hubConnectionBuilder.Services.AddSingleton<IConfigureOptions<HttpConnectionOptions>, HubProtocolDerivedHttpOptionsConfigurer>();
./SignalR/clients/csharp/Client/src/HubConnectionBuilderHttpExtensions.cs:152:        hubConnectionBuilder.Services.AddSingleton<IConnectionFactory, HttpConnectionFactory>();
./SignalR/clients/csharp/Client/test/FunctionalTests/HubConnectionTests.cs:45:        hubConnectionBuilder.Services.AddSingleton(protocol);
./SignalR/clients/csharp/Client/test/FunctionalTests/HubConnectionTests.cs:61:        hubConnectionBuilder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/clients/csharp/Client/test/FunctionalTests/HubConnectionTests.cs:91:            connectionBuilder.Services.AddSingleton(protocol);
./SignalR/clients/csharp/Client/test/FunctionalTests/HubConnectionTests.cs:130:            connectionBuilder.Services.AddSingleton(protocol);
./SignalR/clients/csharp/Client/test/FunctionalTests/HubConnectionTests.cs:160:            connectionBuilder.Services.AddSingleton(protocol);
./SignalR/clients/csharp/Client/test/FunctionalTests/HubProtocolVersionTests.cs:75:            connectionBuilder.Services.AddSingleton<IHubProtocol>(new VersionedJsonHubProtocol(1000));
./SignalR/clients/csharp/Client/test/FunctionalTests/HubProtocolVersionTests.cs:119:            connectionBuilder.Services.AddSingleton<IHubProtocol>(new VersionedJsonHubProtocol(1000));
./SignalR/clients/csharp/Client/test/FunctionalTests/HubProtocolVersionTests.cs:120:            connectionBuilder.Services.AddSingleton<IConnectionFactory>(proxyConnectionFactory);
./SignalR/clients/csharp/Client/test/FunctionalTests/HubProtocolVersionTests.cs:174:            connectionBuilder.Services.AddSingleton<IHubProtocol>(new VersionedJsonHubProtocol(int.MaxValue));
./SignalR/clients/csharp/Client/test/FunctionalTests/Startup.cs:32:        services.AddSingleton<IUserIdProvider, HeaderUserIdProvider>();
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionBuilderTests.cs:30:        builder.Services.AddSingleton<IConnectionFactory>(new HttpConnectionFactory(Options.Create(new HttpConnectionOptions()), NullLoggerFactory.Instance));
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionBuilderTests.cs:64:        builder.Services.AddSingleton<IConnectionFactory>(new HttpConnectionFactory(Options.Create(new HttpConnectionOptions()), NullLoggerFactory.Instance));
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.ConnectionLifecycle.cs:89:            builder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.ConnectionLifecycle.cs:122:            builder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.ConnectionLifecycle.cs:614:            builder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.cs:66:        builder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Helpers.cs:21:        builder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Helpers.cs:30:            builder.Services.AddSingleton(protocol);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:113:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:214:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:309:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:389:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:487:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:571:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:630:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:685:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:743:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:850:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:983:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/HubConnectionTests.Reconnect.cs:1060:                builder.Services.AddSingleton<IConnectionFactory>(testConnectionFactory);
./SignalR/clients/csharp/Client/test/UnitTests/TestServerTests.cs:25:                s.AddSingleton(LoggerFactory);
./SignalR/clients/csharp/Client/test/UnitTests/TestServerTests.cs:54:            connectionBuilder.Services.AddSingleton(LoggerFactory);
./SignalR/clients/csharp/Client/test/UnitTests/TestServerTests.cs:77:                s.AddSingleton(LoggerFactory);
./SignalR/clients/csharp/Client/test/UnitTests/TestServerTests.cs:99:            connectionBuilder.Services.AddSingleton(LoggerFactory);
./SignalR/clients/csharp/Client.Core/src/HubConnectionBuilder.cs:30:        Services.AddSingleton<HubConnection>();
./SignalR/clients/csharp/Client.Core/src/HubConnectionBuilderExtensions.cs:36:        hubConnectionBuilder.Services.AddSingleton<IRetryPolicy>(new DefaultRetryPolicy());
./SignalR/clients/csharp/Client.Core/src/HubConnectionBuilderExtensions.cs:51:        hubConnectionBuilder.Services.AddSingleton<IRetryPolicy>(new DefaultRetryPolicy(reconnectDelays));
./SignalR/clients/csharp/Client.Core/src/HubConnectionBuilderExtensions.cs:63:        hubConnectionBuilder.Services.AddSingleton(retryPolicy);
./SignalR/common/Http.Connections/src/ConnectionsDependencyInjectionExtensions.cs:26:        services.TryAddSingleton<HttpConnectionDispatcher>();
./SignalR/common/Http.Connections/src/ConnectionsDependencyInjectionExtensions.cs:27:        services.TryAddSingleton<HttpConnectionManager>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:63:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:87:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:113:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:150:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:178:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:224:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:265:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:304:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:346:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:384:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:423:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:464:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:527:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:595:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:658:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:721:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:760:                services.AddSingleton<HttpContextConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:858:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:904:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:934:                services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1009:            services.AddSingleton<ImmediatelyCompleteConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1043:            services.AddSingleton<SynchronusExceptionConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1071:            services.AddSingleton<ImmediatelyCompleteConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1103:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1197:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1230:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1268:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1301:            services.AddSingleton<ImmediatelyCompleteConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1331:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1374:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1439:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1504:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1535:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1570:            services.AddSingleton<BlockingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1605:            services.AddSingleton<BlockingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1647:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1694:            services.AddSingleton<ImmediatelyCompleteConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1727:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1779:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1833:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1879:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1911:            serviceCollection.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:1952:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2005:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2058:            services.AddSingleton<NeverEndingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2158:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2209:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2271:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2328:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2387:            services.AddSingleton<TestConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2427:            services.AddSingleton<NeverEndingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2477:            services.AddSingleton<NeverEndingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2505:            services.AddSingleton<NeverEndingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2552:            services.AddSingleton<NeverEndingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2588:            services.AddSingleton<ServiceProviderConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2589:            services.AddSingleton(new MessageWrapper() { Buffer = new ReadOnlySequence<byte>(new byte[] { 1, 2, 3 }) });
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2612:            services.AddSingleton(new MessageWrapper() { Buffer = new ReadOnlySequence<byte>(new byte[] { 4, 5, 6 }) });
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2639:            services.AddSingleton<ServiceProviderConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2694:            services.AddSingleton<ServiceProviderConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:2740:            services.AddSingleton<NeverEndingConnectionHandler>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:3179:                    services.AddSingleton<IDataProtectionProvider, EphemeralDataProtectionProvider>();
./SignalR/common/Http.Connections/test/HttpConnectionDispatcherTests.cs:3210:            services.AddSingleton<ImmediatelyCompleteConnectionHandler>();
./SignalR/common/testassets/Tests.Utils/HubConnectionBuilderTestExtensions.cs:17:        hubConnectionBuilder.Services.AddSingleton(loggerFactory);
./SignalR/perf/benchmarkapps/Crankier/Server/Startup.cs:33:            services.AddSingleton<ConnectionCounter>();
./SignalR/perf/Microbenchmarks/HubConnectionReceiveBenchmark.cs:85:        hubConnectionBuilder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/perf/Microbenchmarks/HubConnectionSendBenchmark.cs:65:        hubConnectionBuilder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/perf/Microbenchmarks/HubConnectionStartBenchmark.cs:51:        hubConnectionBuilder.Services.AddSingleton<IConnectionFactory>(delegateConnectionFactory);
./SignalR/samples/ClientSample/Tcp/TcpHubConnectionBuilderExtensions.cs:40:        builder.Services.AddSingleton<IConnectionFactory, TcpConnectionFactory>();
./SignalR/samples/ClientSample/Tcp/TcpHubConnectionBuilderExtensions.cs:41:        builder.Services.AddSingleton(endPoint);
./SignalR/samples/SocialWeather/Startup.cs:16:        services.AddSingleton(typeof(JsonStreamFormatter<>), typeof(JsonStreamFormatter<>));
./SignalR/samples/SocialWeather/Startup.cs:17:        services.AddSingleton<PipeWeatherStreamFormatter>();
./SignalR/samples/SocialWeather/Startup.cs:18:        services.AddSingleton<ProtobufWeatherStreamFormatter>();
./SignalR/samples/SocialWeather/Startup.cs:19:        services.AddSingleton<FormatterResolver>();
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:23:        services.TryAddSingleton<SignalRCoreMarkerService>();
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:24:        services.TryAddSingleton(typeof(HubLifetimeManager<>), typeof(DefaultHubLifetimeManager<>));
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:25:        services.TryAddSingleton(typeof(IHubProtocolResolver), typeof(DefaultHubProtocolResolver));
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:26:        services.TryAddSingleton(typeof(IHubContext<>), typeof(HubContext<>));
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:27:        services.TryAddSingleton(typeof(IHubContext<,>), typeof(HubContext<,>));
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:28:        services.TryAddSingleton(typeof(HubConnectionHandler<>), typeof(HubConnectionHandler<>));
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:29:        services.TryAddSingleton(typeof(IUserIdProvider), typeof(DefaultUserIdProvider));
./SignalR/server/Core/src/SignalRDependencyInjectionExtensions.cs:30:        services.TryAddSingleton(typeof(HubDispatcher<>), typeof(DefaultHubDispatcher<>));
./SignalR/server/SignalR/src/SignalRDependencyInjectionExtensions.cs:27:        signalrBuilder.Services.AddSingleton<IConfigureOptions<HubOptions<THub>>, HubOptionsSetup<THub>>();
./SignalR/server/SignalR/src/SignalRDependencyInjectionExtensions.cs:44:        services.TryAddSingleton<SignalRMarkerService>();
./SignalR/server/SignalR/test/AddSignalRTests.cs:28:            serviceCollection.AddSingleton(markerService);
./SignalR/server/SignalR/test/AddSignalRTests.cs:29:            serviceCollection.AddSingleton<IUserIdProvider, CustomIdProvider>();
./SignalR/server/SignalR/test/AddSignalRTests.cs:30:            serviceCollection.AddSingleton(typeof(HubLifetimeManager<>), typeof(CustomHubLifetimeManager<>));
./SignalR/server/SignalR/test/AddSignalRTests.cs:31:            serviceCollection.AddSingleton<IHubProtocolResolver, CustomHubProtocolResolver>();
./SignalR/server/SignalR/test/AddSignalRTests.cs:33:            serviceCollection.AddSingleton(typeof(IHubContext<>), typeof(CustomHubContext<>));
./SignalR/server/SignalR/test/AddSignalRTests.cs:34:            serviceCollection.AddSingleton(typeof(IHubContext<,>), typeof(CustomHubContext<,>));
./SignalR/server/SignalR/test/AddSignalRTests.cs:36:            serviceCollection.AddSingleton<IConfigureOptions<HubOptions>>(hubOptions);
./SignalR/server/SignalR/test/AddSignalRTests.cs:57:            serviceCollection.AddSingleton<IUserIdProvider, CustomIdProvider>();
./SignalR/server/SignalR/test/AddSignalRTests.cs:58:            serviceCollection.AddSingleton(typeof(HubLifetimeManager<>), typeof(CustomHubLifetimeManager<>));
./SignalR/server/SignalR/test/AddSignalRTests.cs:59:            serviceCollection.AddSingleton<IHubProtocolResolver, CustomHubProtocolResolver>();
./SignalR/server/SignalR/test/AddSignalRTests.cs:61:            serviceCollection.AddSingleton(typeof(IHubContext<>), typeof(CustomHubContext<>));
./SignalR/server/SignalR/test/AddSignalRTests.cs:62:            serviceCollection.AddSingleton(typeof(IHubContext<,>), typeof(CustomHubContext<,>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.ClientResult.cs:289:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:42:            var serviceProvider = HubConnectionHandlerTestUtils.CreateServiceProvider(s => s.AddSingleton(trackDispose), LoggerFactory);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:68:                s.AddSingleton(trackDispose);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:96:            var serviceProvider = HubConnectionHandlerTestUtils.CreateServiceProvider(s => s.AddSingleton(state), LoggerFactory);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:698:                services.AddSingleton(mockLifetimeManager.Object);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:699:                services.AddSingleton(mockHubActivator.Object);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:740:                services.AddSingleton(mockLifetimeManager.Object);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:772:                services.AddSingleton(mockLifetimeManager.Object);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:2338:                services.AddSingleton<IAuthorizationHandler, TestAuthHandler>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:2546:                services.AddSingleton<IUserIdProvider>(userIdProvider);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:2980:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3039:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3179:                builder.AddSingleton(typeof(IHubActivator<>), typeof(CustomHubActivator<>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3214:                builder.AddSingleton(typeof(IHubActivator<>), typeof(CustomHubActivator<>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3249:                builder.AddSingleton(typeof(IHubActivator<>), typeof(CustomHubActivator<>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3286:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3341:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3397:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3467:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3468:                builder.AddSingleton(typeof(IHubActivator<>), typeof(CustomHubActivator<>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3733:            services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3783:            var serviceProvider = HubConnectionHandlerTestUtils.CreateServiceProvider(s => s.AddSingleton(state), LoggerFactory);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3806:            var serviceProvider = HubConnectionHandlerTestUtils.CreateServiceProvider(s => s.AddSingleton(state), LoggerFactory);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:3862:                LoggerFactory, (services) => services.AddSingleton<IHubProtocol>(testProtocol.Object));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4017:                builder.AddSingleton(typeof(IHubActivator<>), typeof(CustomHubActivator<>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4055:                builder.AddSingleton(typeof(IHubActivator<>), typeof(CustomHubActivator<>));
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4175:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4216:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4261:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4292:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4319:                builder.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4472:            services.AddSingleton(callerService);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4634:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4651:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4652:            provider.AddSingleton<Service2>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4653:            provider.AddSingleton<Service3>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4670:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4671:            provider.AddSingleton<Service2>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4672:            provider.AddSingleton<Service3>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4697:            provider.AddSingleton(channel.Reader);
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4719:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4740:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4761:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4786:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4808:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4809:            provider.AddSingleton<Service2>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4830:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4831:            provider.AddSingleton<Service2>();
./SignalR/server/SignalR/test/HubConnectionHandlerTests.cs:4888:            provider.AddSingleton<Service1>();
./SignalR/server/SignalR/test/HubConnectionHandlerTestUtils/Utils.cs:69:            services.AddSingleton(loggerFactory);
./SignalR/server/SignalR/test/HubFilterTests.cs:29:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubFilterTests.cs:85:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubFilterTests.cs:105:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubFilterTests.cs:235:                services.AddSingleton(tcsService2);
./SignalR/server/SignalR/test/HubFilterTests.cs:286:                services.AddSingleton(tcsService2);
./SignalR/server/SignalR/test/HubFilterTests.cs:516:                services.AddSingleton(new VerifyMethodFilter(tcsService));
./SignalR/server/SignalR/test/HubFilterTests.cs:536:                services.AddSingleton(counter);
./SignalR/server/SignalR/test/HubFilterTests.cs:584:                services.AddSingleton<CounterFilter>();
./SignalR/server/SignalR/test/HubFilterTests.cs:585:                services.AddSingleton(counter);
./SignalR/server/SignalR/test/HubFilterTests.cs:726:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubFilterTests.cs:767:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubFilterTests.cs:802:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/HubFilterTests.cs:843:                services.AddSingleton(tcsService);
./SignalR/server/SignalR/test/Startup.cs:67:        services.AddSingleton<IAuthorizationHandler, TestAuthHandler>();
./SignalR/server/StackExchangeRedis/src/RedisDependencyInjectionExtensions.cs:48:        signalrBuilder.Services.AddSingleton(typeof(HubLifetimeManager<>), typeof(RedisHubLifetimeManager<>));
./SignalR/server/StackExchangeRedis/test/RedisEndToEnd.cs:159:        hubConnectionBuilder.Services.AddSingleton(protocol);
./SignalR/server/StackExchangeRedis/test/Startup.cs:27:        services.AddSingleton<IUserIdProvider, UserNameIdProvider>();
./Testing/src/AssemblyTestLog.cs:176:                builder.Services.AddSingleton<ILoggerProvider>(_ => serilogLoggerProvider);
./Testing/src/AssemblyTestLog.cs:205:                builder.Services.AddSingleton<ILoggerProvider>(_ => serilogLoggerProvider);
./Testing/src/LoggedTest/LoggedTestBase.cs:45:    public void AddTestLogging(IServiceCollection services) => services.AddSingleton(LoggerFactory);
./Testing/src/Logging/XunitLoggerFactoryExtensions.cs:15:        builder.Services.AddSingleton<ILoggerProvider>(new XunitLoggerProvider(output));
./Testing/src/Logging/XunitLoggerFactoryExtensions.cs:21:        builder.Services.AddSingleton<ILoggerProvider>(new XunitLoggerProvider(output, minLevel));
./Testing/src/Logging/XunitLoggerFactoryExtensions.cs:27:        builder.Services.AddSingleton<ILoggerProvider>(new XunitLoggerProvider(output, minLevel, logStart));
./Tools/GetDocumentInsider/src/Commands/GetDocumentCommandWorker.cs:70:                services.AddSingleton<IServer, NoopServer>();
./Tools/GetDocumentInsider/src/Commands/GetDocumentCommandWorker.cs:71:                services.AddSingleton<IHostLifetime, NoopHostLifetime>();
./WebEncoders/src/EncoderServiceCollectionExtensions.cs:32:        services.TryAddSingleton(
./WebEncoders/src/EncoderServiceCollectionExtensions.cs:34:        services.TryAddSingleton(
./WebEncoders/src/EncoderServiceCollectionExtensions.cs:36:        services.TryAddSingleton(
./WebEncoders/test/EncoderServiceCollectionExtensionsTests.cs:68:        serviceCollection.AddSingleton<HtmlEncoder, HtmlTestEncoder>();
./WebEncoders/test/EncoderServiceCollectionExtensionsTests.cs:69:        serviceCollection.AddSingleton<JavaScriptEncoder, JavaScriptTestEncoder>();
